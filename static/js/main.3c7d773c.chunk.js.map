{"version":3,"sources":["components/ErrorBoundary.tsx","components/HelpModal.tsx","util/typeGuardUtils.ts","models/mClaim.ts","models/mEvidence.ts","models/mMatch.ts","models/mPart.ts","models/mPoint.ts","models/mSide.ts","stores/slices/claim.ts","stores/slices/evidence.ts","stores/slices/match.ts","util/funcs.ts","stores/slices/part.ts","stores/slices/point.ts","stores/slices/side.ts","stores/index.ts","services/id.ts","util/utilityTypes.ts","stores/ids/id_generators.ts","services/evidence.ts","services/point.ts","errors/validationError.ts","services/part.ts","services/claim.ts","repositories/claim.ts","repositories/evidence.ts","repositories/point.ts","repositories/part.ts","services/side.ts","repositories/side.ts","services/match.ts","repositories/match.ts","repositories/loader.ts","components/LoadFileModal.tsx","components/TextInput.tsx","components/Claim.tsx","components/Evidence.tsx","services/line.ts","services/toast.tsx","util/hooks.ts","components/Point.tsx","components/Part.tsx","components/Side.tsx","components/Match.tsx","components/MenuBar.tsx","components/images/AddClaim.svg","components/images/AddEvidence.svg","components/images/AddPoint.svg","components/images/AddPointChild.svg","components/images/AddPointParent.svg","components/images/AddPointToPart.svg","components/images/DrawLine.svg","components/ToolBar.tsx","components/TutorialModal.tsx","repositories/textfileSaver.ts","repositories/encoder.ts","components/App.tsx","index.tsx"],"names":["ErrorBoundary","props","fallbackRender","fallbackProps","children","wrapStyle","closeStyle","titleStyle","shortcutTableStyle","isObject","value","arrayTypeof","arr","test_types","Array","isArray","every","v","includes","multipleTypeof","mClaimSignature","claim_id_prefix","id_is_mClaim","id","startsWith","is_mClaim","type_signature","mEvidenceSignature","evidence_id_prefix","id_is_mEvidence","is_mEvidence","mMatchSignature","match_id_prefix","id_is_mMatch","is_mMatch","mPartSignature","part_id_prefix","id_is_mPart","is_mPart","mPointSignature","point_id_prefix","id_is_mPoint","is_mPoint","mSideSignature","side_id_prefix","id_is_mSide","is_mSide","claim_adapter","createEntityAdapter","claim_initialState","getInitialState","last_id_number","claim_slice","createSlice","name","initialState","reducers","add","state","action","addOne","payload","upsertOne","evi","entities","removeOne","removeAll","incrementID","setParent","parent","entity","undefined","reset","claim_selectors","getSelectors","claim","evidence_adapter","evidence_initialState","evidence_slice","evidence_selectors","evidence","match_adapter","match_initialState","match_slice","addChild","new_part","contents","push","match_selectors","match","reorder_array","array","target","before","func","e","t","_func","target_elem","find","result","filter","index","findIndex","length","splice","part_adapter","part_initialState","part_slice","reorderChild","child_target","part_selectors","part","point_adapter","point_initialState","point_slice","point","point_selectors","side_adapter","side_initialState","side_slice","side_selectors","side","store","configureStore","reducer","id_to_type","rawUseSelector","TypeError","assertNever","type_to_store","getState","type_to_slice","id_to_slice","type","get_from_id","type_store","id_to_store","get_parent_id","next_content_id","parent_id","parent_type","sibling_list","item_index","id_to_prefix","compare_id","a","b","a_prefix","b_prefix","a_number","parseInt","replace","b_number","Number","isNaN","generate_evidence_id","id_number","dispatch","actions","generate_claim_id","generate_point_id","generate_part_id","generate_side_id","generate_match_id","generate_evidence","from","parent_obj","generated","append_evidence","switch_for_append","part_add_child","point_add_child","generate_point","Error","empty","generate_claim","child","reorder_child","get_ancestor_point","descendent_id","get_ancestor_part","is_switch_for_append_id","claim_evi","append_sibling_point","reorder_before","append_point_to_parent","append_point_child","set_rebut","end1","end2","to","sort","part1","part2","obj","rebut_to","generate_part","append_claim","decodeClaim","idMap","set","decodeEvidence","about_author","author","year","encodeChild","encodePoint","model","encodeEvidence","encodeClaim","isChildObj","map","decodePoint","get","numbering","reduce","decodePointChild","encodePart","decodePart","generate_side","parts","returned","encodeSide","decodeSide","generate_match","sides","i","encodeMatch","callbackfn","meta","topic","date","winner","opponent","members","k","Object","keys","note","is_decodeMatchInputObj","isMetaInputObj","isMatchInputObj","decodeXML_obj","Map","root","console","log","at","member","acm","decodeMatch","deepmerge","all","string_to_mMatch","xml","xml2js","parseStringPromise","explicitChildren","preserveChildrenOrder","xml_obj","loadFileWrapStyle","loadFileCloseStyle","loadFileTitleStyle","loadFileDropzoneStyle","empty_event_handler","styleTextInput","TextInput","forwardRef","ref","className","onClick","onChange","onInput","onBlur","onFocus","onKeyPress","defaultValue","placeholder","css","key","styleStretchTextInput","updateWidth","element","minWidth","style","width","scrollWidth","StretchTextInput","changeHandler","useCallback","currentTarget","inputRef","useRef","current","useEffect","styleTextArea","TextArea","styleStretchTextArea","updateHeight","height","scrollHeight","StretchTextArea","stylePointClaim","Claim","useDispatch","useSelector","selectById","claimID","context","useContext","AppContext","focusRef","Refs","nextFocus","focus","preventDefault","stopPropagation","setSelected","styleEvidenceHeadContent","styleEvidenceHeader","EvidenceHeader","metadata","parentID","toString","styleEvidence","styleEvidenceContent","Evidence","eviID","defaultOptions","color","size","path","startPlug","endPlug","createLeaderLine","start","end","options","LeaderLine","ToastContent","data","title","description","toast","nativeToast","toastAndLog","log_msg","InvalidSymbol","Symbol","usePreviousValue","doUpdate","prevValue","useCheckDepsUpdate","deps","prevDeps","some","is","PointChild","pointID","stylePointNumberingWrap","stylePointNumbering","stylePointChildrenWrap","stylePoint","Point","Callbacks","idToPointRef","thisRef","useState","rebuttalLine","setRebuttalLine","remove","stylePartName","stylePartChildrenWrap","stylePart","Part","partID","tabIndex","content","styleSide","styleSideName","styleSideChildrenWrap","Side","sideID","styleMatchHeader","MatchHeader","styleMatch","Match","matchID","_path","_path2","menuVertivalPadding","menuItemStyle","MenuItem","label","menuItemListStyle","MenuItemList","items","menuBarStyle","menuStyle","menuTextStyle","onMenuClick","parentNode","querySelector","classList","toggle","error","MenuBar","_excluded","_extends","assign","bind","arguments","source","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgAddClaim","_ref","svgRef","titleId","xmlns","xmlnsXlink","x","y","viewBox","enableBackground","xmlSpace","d","_path3","_path4","ForwardRef","SvgAddEvidence","_circle","_circle2","SvgAddPoint","cx","cy","r","SvgAddPointChild","SvgAddPointParent","SvgAddPointToPart","_g","_g2","SvgDrawLine","topBarStyle","buttonsWrapStyle","buttonStyle","saveXML","filename","mimetype","blob","Blob","saveAs","saveText","saveMatch","matchId","fileName","create","prettyPrint","encode","createContext","useAppEventListeners","selected","setRebutToFn","setLineStartId","setNextFocus","add_claim","add_point","add_point_to_parent","add_point_child","add_point_to_part","_parent_id","append_point_to_part","draw_line","_","point_rebut_to","point_from","document","activeElement","add_evidence","MovingDivLine","pointerCoord","setPointerCoord","line","setLine","updateLine","position","show","onMouseMoveFnRef","clientX","clientY","coord","lineStartId","MovingDivLineInner","newLine","left","top","toggleFullscreen","fullscreenEnabled","fullscreenElement","exitFullscreen","documentElement","requestFullscreen","catch","message","App","setMatchID","useLayoutEffect","aff","neg","rebutToFn","setIdToPointRef","rebutToFnInfo","stop","previousActive","data_modelid","getAttribute","HTMLElement","blur","useOnClickToRebut","onClickToRebut","stopToRebut","operations","loadFileName","setLoadFileName","setFileName","useModal","preventScroll","Modal","open","close","isModalOpen","onDrop","acceptedFiles","File","text","alert","useDropzone","getRootProps","getInputProps","isDragActive","useLoadFileModal","LoadFileModal","openLoadFileModal","useHelpModal","HelpModal","openHelpModal","videoOptions","playerVars","autoplay","controls","rel","showinfo","mute","loop","Cookies","videoId","onEnd","setTimeout","opts","useTutorialModal","TutorialModal","openTutorialModal","escapeFn","useHotkeys","enableOnTags","useAppHotkeys","AppContextValue","is_deps_changed","prev_obj","useDependentObj","_new","isToolBarOpen","setIsToolBarOpen","toggleToolBar","useToolBar","ToolBar","toggleToolBarOpen","menuBarItems","window","Provider","onMouseMove","ReactDOM","render","StrictMode","styles","sanitize_css","getElementById"],"mappings":"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","file":"static/js/main.3c7d773c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { ErrorBoundary as ReactErrorBoundary, FallbackProps } from 'react-error-boundary';\r\n\r\nexport interface ErrorBoundaryProps {\r\n  children: React.ReactNode;\r\n}\r\nexport const ErrorBoundary: React.VFC<ErrorBoundaryProps> = (props) => {\r\n  return (\r\n    <ReactErrorBoundary fallbackRender={(fallbackProps: FallbackProps) => <h1>Something wrong...</h1>}>\r\n      {props.children}\r\n    </ReactErrorBoundary>\r\n  );\r\n};\r\n","import { css } from '@emotion/react';\r\nimport React, { useCallback } from 'react';\r\nimport { useModal } from 'react-hooks-use-modal';\r\nimport { FaTimes } from 'react-icons/fa';\r\n\r\nconst wrapStyle = css`\r\n  position: relative;\r\n  width: 70vw;\r\n  max-width: 600px;\r\n  max-height: 80vh;\r\n  padding: 24px 40px 16px;\r\n  border-radius: 8px;\r\n  background-color: white;\r\n`;\r\nconst closeStyle = css`\r\n  display: inline-block;\r\n  position: absolute;\r\n  width: 32px;\r\n  right: 8px;\r\n  top: 8px;\r\n  cursor: pointer;\r\n  color: #000;\r\n  &:hover {\r\n    color: #333;\r\n  }\r\n`;\r\nconst titleStyle = css`\r\n  font-size: 1.5em;\r\n`;\r\nconst shortcutTableStyle = css`\r\n  & > tr > td {\r\n    padding: 0.5em;\r\n    &:first-of-type {\r\n      text-align: right;\r\n    }\r\n  }\r\n  & .key {\r\n    margin: 0 0.5em;\r\n    padding: 0.2em 0.5em;\r\n    background-color: #666;\r\n    color: white;\r\n    border-radius: 0.2em;\r\n  }\r\n`;\r\n\r\nexport type useHelpModal = () => [React.VFC<{}>, () => void, () => void, boolean];\r\nexport const useHelpModal: useHelpModal = () => {\r\n  const [Modal, open, close, isModalOpen] = useModal('root', {\r\n    preventScroll: true,\r\n  });\r\n  return [\r\n    useCallback(\r\n      () => (\r\n        <Modal>\r\n          <div id='help-wrap' css={wrapStyle}>\r\n            <div css={closeStyle} onClick={close}>\r\n              <FaTimes title='Close the help modal' size={32} />\r\n            </div>\r\n            <div css={titleStyle}>ヘルプ</div>\r\n            <div>\r\n              <section>\r\n                <h2>ショートカットキーの一覧</h2>\r\n                <table css={shortcutTableStyle}>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>C</span>\r\n                    </td>\r\n                    <td>現在の位置にクレームを追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>E</span>\r\n                    </td>\r\n                    <td>現在の位置にエビデンスを追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>P</span>\r\n                    </td>\r\n                    <td>現在の位置に論点を追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>Ctrl</span>\r\n                      <span className='key'>P</span>\r\n                    </td>\r\n                    <td>現在の子要素に論点を追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>Shift</span>\r\n                      <span className='key'>P</span>\r\n                    </td>\r\n                    <td>現在の親要素に論点を追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>Ctrl</span>\r\n                      <span className='key'>Shift</span>\r\n                      <span className='key'>P</span>\r\n                    </td>\r\n                    <td>パート直下に論点を追加</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Alt</span>\r\n                      <span className='key'>L</span>\r\n                    </td>\r\n                    <td>\r\n                      反駁先の線を追加\r\n                      <br />\r\n                      （反駁先を選択すれば確定）\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td>\r\n                      <span className='key'>Esc</span>\r\n                    </td>\r\n                    <td>反駁・全画面表示などを終了</td>\r\n                  </tr>\r\n                </table>\r\n              </section>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n      ),\r\n      [close, isModalOpen],\r\n    ),\r\n    open,\r\n    close,\r\n    isModalOpen,\r\n  ];\r\n};\r\n","type WouldBe<T> = { [P in keyof T]?: unknown };\n\nexport const isObject = <T extends object>(value: unknown): value is WouldBe<T> => {\n  return typeof value === 'object' && value !== null;\n};\n\ntype typenames = 'undefined' | 'object' | 'boolean' | 'number' | 'bigint' | 'string' | 'symbol' | 'function';\ntype typenames2type<T extends typenames> = T extends 'undefined'\n  ? undefined\n  : T extends 'object'\n  ? object\n  : T extends 'boolean'\n  ? boolean\n  : T extends 'number'\n  ? number\n  : T extends 'bigint'\n  ? bigint\n  : T extends 'string'\n  ? string\n  : T extends 'symbol'\n  ? symbol\n  : T extends 'function'\n  ? (...args: any[]) => unknown\n  : never;\nexport const multipleTypeof = (value: unknown, test_types: Array<typenames>): boolean => {\n  return test_types.includes(typeof value);\n};\nexport const arrayTypeof = <T extends typenames>(arr: unknown, test_types: T | T[]): arr is Array<typenames2type<T>> =>\n  Array.isArray(arr) && arr.every((v) => multipleTypeof(v, typeof test_types === 'string' ? [test_types] : test_types));\n","import { baseModel } from './baseModel';\nimport { mPoint } from './mPoint';\nimport { isObject, multipleTypeof } from 'util/typeGuardUtils';\n\nexport const mClaimSignature = 'mClaim';\n\nexport const claim_id_prefix = 'claim_';\nexport type mClaimId = `${typeof claim_id_prefix}${number}`;\nexport const id_is_mClaim = (id: unknown): id is mClaimId => {\n  return typeof id === 'string' && id.startsWith(claim_id_prefix);\n};\n\nexport interface mClaim extends baseModel {\n  type_signature: typeof mClaimSignature;\n  id: mClaimId;\n  parent: mPoint['id'];\n  contents?: string;\n}\n\nexport const is_mClaim = (value: unknown): value is mClaim => {\n  return isObject<mClaim>(value) && value.type_signature == mClaimSignature;\n};\n","import { baseModel } from './baseModel';\nimport { mPoint } from './mPoint';\nimport { isObject, multipleTypeof } from 'util/typeGuardUtils';\n\nexport const mEvidenceSignature = 'mEvidence';\n\nexport const evidence_id_prefix = 'evi_';\nexport type mEvidenceId = `${typeof evidence_id_prefix}${number}`;\nexport const id_is_mEvidence = (id: unknown): id is mEvidenceId => {\n  return typeof id === 'string' && id.startsWith(evidence_id_prefix);\n};\n\nexport interface mEvidence extends baseModel {\n  type_signature: typeof mEvidenceSignature;\n  id: mEvidenceId;\n  parent: mPoint['id'];\n  about_author?: string;\n  author?: string;\n  year?: number | string;\n  contents?: string;\n}\n\nexport const is_mEvidence = (value: unknown): value is mEvidence => {\n  return isObject<mEvidence>(value) && value.type_signature == mEvidenceSignature;\n};\n","import { baseModel } from './baseModel';\nimport { mPart } from './mPart';\nimport { mSide } from './mSide';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport const mMatchSignature = 'mMatch';\n\nexport const match_id_prefix = 'match_';\nexport type mMatchId = `${typeof match_id_prefix}${number}`;\nexport const id_is_mMatch = (id: unknown): id is mMatchId => {\n  return typeof id === 'string' && id.startsWith(match_id_prefix);\n};\n\nexport interface mMatch extends baseModel {\n  type_signature: typeof mMatchSignature;\n  id: mMatchId;\n  topic?: string;\n  date?: Date | string;\n  side?: mSide['side'];\n  winner?: string;\n  opponent?: string;\n  member?: Record<Required<mPart>['name'], string>; // パート名からメンバ名への対応\n  note?: string;\n  contents?: Array<mSide['id']>; // mSideのID\n}\n\nexport const is_mMatch = (value: unknown): value is mMatch => {\n  return isObject<mMatch>(value) && value.type_signature == mMatchSignature;\n};\n","import { baseModel } from './baseModel';\nimport { mPoint } from './mPoint';\nimport { mSide } from './mSide';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport const mPartSignature = 'mPart';\n\nexport const part_id_prefix = 'part_';\nexport type mPartId = `${typeof part_id_prefix}${number}`;\nexport const id_is_mPart = (id: unknown): id is mPartId => {\n  return typeof id === 'string' && id.startsWith(part_id_prefix);\n};\n\nexport interface mPart extends baseModel {\n  type_signature: typeof mPartSignature;\n  id: mPartId;\n  parent: mSide['id'];\n  name?: string | number;\n  contents?: Array<mPoint['id']>;\n}\n\nexport const is_mPart = (value: unknown): value is mPart => {\n  return isObject<mPart>(value) && value.type_signature == mPartSignature;\n};\n","import { baseModel } from './baseModel';\nimport { id_is_mClaim, mClaim } from './mClaim';\nimport { id_is_mEvidence, mEvidence } from './mEvidence';\nimport { id_is_mPart, mPart } from './mPart';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport const mPointSignature = 'mPoint';\n\nexport const point_id_prefix = 'point_';\nexport type mPointId = `${typeof point_id_prefix}${number}`;\nexport const id_is_mPoint = (id: unknown): id is mPointId => {\n  return typeof id === 'string' && id.startsWith(point_id_prefix);\n};\n\nexport type PointChild = mClaim | mEvidence | mPoint;\nexport const id_is_PointChild = (id: unknown): id is PointChild['id'] => {\n  return id_is_mPoint(id) || id_is_mClaim(id) || id_is_mEvidence(id);\n};\nexport type PointParent = mPart | mPoint;\nexport const id_is_PointParent = (id: unknown): id is PointParent['id'] => {\n  return id_is_mPart(id) || id_is_mPoint(id);\n};\n\nexport interface mPoint extends baseModel {\n  type_signature: typeof mPointSignature;\n  id: mPointId;\n  parent: PointParent['id'];\n  numbering?: number | string;\n  children_numbering?: number | string;\n  contents?: Array<PointChild['id']>;\n  rebut_to?: mPoint['id'];\n}\n\nexport const is_mPoint = (value: unknown): value is mPoint => {\n  return isObject<mPoint>(value) && value.type_signature == mPointSignature;\n};\n","import { baseModel } from './baseModel';\nimport { mMatch } from './mMatch';\nimport { mPart } from './mPart';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport const mSideSignature = 'mSide';\n\nexport const side_id_prefix = 'side_';\nexport type mSideId = `${typeof side_id_prefix}${number}`;\nexport const id_is_mSide = (id: unknown): id is mSideId => {\n  return typeof id === 'string' && id.startsWith(side_id_prefix);\n};\n\nexport interface mSide extends baseModel {\n  type_signature: typeof mSideSignature;\n  id: mSideId;\n  side?: string; // TODO: enumにする\n  parent: mMatch['id'];\n  contents?: Array<mPart['id']>; // mPartのID\n}\n\nexport const is_mSide = (value: unknown): value is mSide => {\n  return isObject<mSide>(value) && value.type_signature == mSideSignature;\n};\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { mClaim, is_mClaim } from 'models/mClaim';\nimport { mPoint } from 'models/mPoint';\n\nconst claim_adapter = createEntityAdapter<mClaim>();\nconst claim_initialState: EntityStateWithLastID<mClaim> = claim_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const claim_slice = createSlice({\n  name: 'claim',\n  initialState: claim_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mClaim>) => {\n      claim_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<Pick<mClaim, 'id'> & Partial<mClaim>>) => {\n      const evi = {\n        ...state.entities[action.payload.id],\n        ...action.payload,\n      };\n      if (is_mClaim(evi)) claim_adapter.upsertOne(state, evi);\n    },\n    removeOne: (state, action: PayloadAction<mClaim['id']>) => {\n      claim_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      claim_adapter.removeAll(state);\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    // Payload[a,b]->ID===aの要素の親をbに設定する\n    setParent: (state, action: PayloadAction<[mClaim['id'], mPoint['id']]>) => {\n      const [id, parent] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      entity.parent = parent;\n    },\n    reset: () => claim_initialState,\n  },\n});\nexport const claim_selectors = claim_adapter.getSelectors<RootState>((state) => state.claim);\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { mEvidence, is_mEvidence } from 'models/mEvidence';\nimport { mPoint } from 'models/mPoint';\n\nconst evidence_adapter = createEntityAdapter<mEvidence>();\nconst evidence_initialState: EntityStateWithLastID<mEvidence> = evidence_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const evidence_slice = createSlice({\n  name: 'evidence',\n  initialState: evidence_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mEvidence>) => {\n      evidence_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<Pick<mEvidence, 'id'> & Partial<mEvidence>>) => {\n      const evi = {\n        ...state.entities[action.payload.id],\n        ...action.payload,\n      };\n      if (is_mEvidence(evi)) evidence_adapter.upsertOne(state, evi);\n    },\n    removeOne: (state, action: PayloadAction<mEvidence['id']>) => {\n      evidence_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      evidence_adapter.removeAll(state);\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    // Payload[a,b]->ID===aの要素の親をbに設定する\n    setParent: (state, action: PayloadAction<[mEvidence['id'], mPoint['id']]>) => {\n      const [id, parent] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      entity.parent = parent;\n    },\n    reset: () => evidence_initialState,\n  },\n});\nexport const evidence_selectors = evidence_adapter.getSelectors<RootState>((state) => state.evidence);\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { mMatch } from 'models/mMatch';\nimport { mSide } from 'models/mSide';\n\nconst match_adapter = createEntityAdapter<mMatch>();\nconst match_initialState: EntityStateWithLastID<mMatch> = match_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const match_slice = createSlice({\n  name: 'match',\n  initialState: match_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mMatch>) => {\n      match_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<mMatch>) => {\n      match_adapter.upsertOne(state, action.payload);\n    },\n    removeOne: (state, action: PayloadAction<mMatch['id']>) => {\n      match_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      match_adapter.removeAll(state);\n    },\n    // Payload[a,b]->ID==aの要素にあるcontentsの末尾にbを追加する\n    addChild: (state, action: PayloadAction<[mMatch['id'], mSide['id']]>) => {\n      const [id, new_part] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      if (entity.contents === undefined) entity.contents = [];\n      entity.contents.push(new_part);\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    reset: () => match_initialState,\n  },\n});\nexport const match_selectors = match_adapter.getSelectors<RootState>((state) => state.match);\n","// array上でtargetに対応する要素をberofeの前に移動する. before===nullなら末尾に移動する\nexport function reorder_array<T>(array: Array<T>, target: T, before: T | null): Array<T>;\nexport function reorder_array<T, U>(\n  array: Array<T>,\n  target: U,\n  before: U | null,\n  func: (e: T, t: U) => boolean,\n): Array<T>;\nexport function reorder_array<T, U>(\n  array: Array<T>,\n  target: U,\n  before: U | null,\n  func?: (e: T, t: U) => boolean,\n): Array<T> {\n  if (func === undefined) func = (e, t) => e === (t as any as T); // funcがないのは1つ目の定義のみ\n  const _func = func as Exclude<typeof func, undefined>; // 前行でfuncがundefinedでないことは保証できる\n  const target_elem = array.find((e) => _func(e, target));\n  if (target_elem === undefined) return array;\n  const result = array.filter((e) => !_func(e, target));\n  const index = before !== null ? result.findIndex((e) => _func(e, before)) : result.length;\n  if (index === -1) return array; // beforeに該当する要素がなければ何も変更しない\n  result.splice(index, 0, target_elem);\n  return result;\n}\n// objectに対してmapを適用（戻り値は順序不定の配列）\nexport const map_object = <K extends string | number | symbol, V, R>(\n  obj: Record<K, V>,\n  callbackfn: (value: V, key: K, object: Record<K, V>) => R,\n): R[] => {\n  return (Object.keys(obj) as K[]).map((k) => callbackfn(obj[k], k, obj));\n};\nexport const map_to_object = <V, RK extends string | number | symbol, RV>(\n  arr: Array<V>,\n  callbackfn: (value: V, index: number, arr: Array<V>) => Record<RK, RV>,\n): Record<RK, RV> =>\n  arr.reduce<Record<RK, RV>>((acm, v, i, arr) => ({ ...acm, ...callbackfn(v, i, arr) }), {} as Record<RK, RV>);\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { mPart } from 'models/mPart';\nimport { mPoint } from 'models/mPoint';\nimport { mSide } from 'models/mSide';\nimport { reorder_array } from 'util/funcs';\n\nconst part_adapter = createEntityAdapter<mPart>();\nconst part_initialState: EntityStateWithLastID<mPart> = part_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const part_slice = createSlice({\n  name: 'part',\n  initialState: part_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mPart>) => {\n      part_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<mPart>) => {\n      part_adapter.upsertOne(state, action.payload);\n    },\n    removeOne: (state, action: PayloadAction<mPart['id']>) => {\n      part_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      part_adapter.removeAll(state);\n    },\n    // Payload[a,b]->ID==aの要素にあるcontentsの末尾にbを追加する\n    addChild: (state, action: PayloadAction<[mPart['id'], mPoint['id']]>) => {\n      const [id, new_part] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      if (entity.contents === undefined) entity.contents = [];\n      entity.contents.push(new_part);\n    },\n    // Payload[a,b,c]->ID===aの要素にあるcontentsに対してreorder_array(b,c)を実行する\n    reorderChild: (state, action: PayloadAction<[mPart['id'], mPoint['id'], mPoint['id'] | null]>) => {\n      const [id, child_target, before] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      const contents = entity.contents;\n      if (contents !== undefined) {\n        entity.contents = reorder_array(contents, child_target, before);\n      }\n    },\n    // Payload[a,b]->ID===aの要素の親をbに設定する\n    setParent: (state, action: PayloadAction<[mPart['id'], mSide['id']]>) => {\n      const [id, parent] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      entity.parent = parent;\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    reset: () => part_initialState,\n  },\n});\nexport const part_selectors = part_adapter.getSelectors<RootState>((state) => state.part);\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { is_mPoint, mPoint, mPointSignature, PointChild, PointParent } from 'models/mPoint';\nimport { reorder_array } from 'util/funcs';\n\nconst point_adapter = createEntityAdapter<mPoint>();\nconst point_initialState: EntityStateWithLastID<mPoint> = point_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const point_slice = createSlice({\n  name: 'point',\n  initialState: point_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mPoint>) => {\n      point_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<Pick<mPoint, 'id'> & Partial<mPoint>>) => {\n      const point = {\n        ...state.entities[action.payload.id],\n        ...action.payload,\n      };\n      if (is_mPoint(point)) point_adapter.upsertOne(state, point);\n    },\n    removeOne: (state, action: PayloadAction<mPoint['id']>) => {\n      point_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      point_adapter.removeAll(state);\n    },\n    // Payload[a,b]: ID==aの要素にあるcontentsの末尾にbを追加する\n    addChild: (state, action: PayloadAction<[mPoint['id'], PointChild['id']]>) => {\n      const [id, new_part] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined || typeof entity.contents === 'string') return;\n      if (entity.contents === undefined) entity.contents = [];\n      entity.contents.push(new_part);\n    },\n    // Payload[a,b,c]->ID===aの要素にあるcontentsに対してreorder_array(b,c)を実行する\n    reorderChild: (state, action: PayloadAction<[mPoint['id'], PointChild['id'], PointChild['id'] | null]>) => {\n      const [id, child_target, before] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      const contents = entity.contents;\n      if (!(contents instanceof Array)) return;\n      entity.contents = reorder_array(contents, child_target, before, (e, t) => e === t);\n    },\n    // Payload[a,b]->ID===aの要素の親をbに設定する\n    setParent: (state, action: PayloadAction<[mPoint['id'], PointParent['id']]>) => {\n      const [id, parent] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      entity.parent = parent;\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    reset: () => point_initialState,\n  },\n});\nexport const point_selectors = point_adapter.getSelectors<RootState>((state) => state.point);\n","import { RootState } from '../index';\nimport { EntityStateWithLastID } from './EntityStateWithLastID';\nimport { createEntityAdapter, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { mMatch } from 'models/mMatch';\nimport { mPart } from 'models/mPart';\nimport { mSide } from 'models/mSide';\n\nconst side_adapter = createEntityAdapter<mSide>();\nconst side_initialState: EntityStateWithLastID<mSide> = side_adapter.getInitialState({\n  last_id_number: 0,\n});\nexport const side_slice = createSlice({\n  name: 'side',\n  initialState: side_initialState,\n  reducers: {\n    add: (state, action: PayloadAction<mSide>) => {\n      side_adapter.addOne(state, action.payload);\n    },\n    upsertOne: (state, action: PayloadAction<mSide>) => {\n      side_adapter.upsertOne(state, action.payload);\n    },\n    removeOne: (state, action: PayloadAction<string>) => {\n      side_adapter.removeOne(state, action.payload);\n    },\n    removeAll: (state) => {\n      side_adapter.removeAll(state);\n    },\n    // Payload[a,b]->ID==aの要素にあるcontentsの末尾にbを追加する\n    addChild: (state, action: PayloadAction<[mSide['id'], mPart['id']]>) => {\n      const [id, new_part] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      if (entity.contents === undefined) entity.contents = [];\n      entity.contents.push(new_part);\n    },\n    // Payload[a,b]->ID===aの要素の親をbに設定する\n    setParent: (state, action: PayloadAction<[mSide['id'], mMatch['id']]>) => {\n      const [id, parent] = action.payload;\n      const entity = state.entities[id];\n      if (entity === undefined) return;\n      entity.parent = parent;\n    },\n    incrementID: (state) => {\n      state.last_id_number++;\n    },\n    reset: () => side_initialState,\n  },\n});\nexport const side_selectors = side_adapter.getSelectors<RootState>((state) => state.side);\n","import { claim_slice } from './slices/claim';\nimport { evidence_slice } from './slices/evidence';\nimport { match_slice } from './slices/match';\nimport { part_slice } from './slices/part';\nimport { point_slice } from './slices/point';\nimport { side_slice } from './slices/side';\nimport { configureStore } from '@reduxjs/toolkit';\nimport { TypedUseSelectorHook, useSelector as rawUseSelector } from 'react-redux';\n\nexport const store = configureStore({\n  reducer: {\n    evidence: evidence_slice.reducer,\n    claim: claim_slice.reducer,\n    point: point_slice.reducer,\n    part: part_slice.reducer,\n    side: side_slice.reducer,\n    match: match_slice.reducer,\n  },\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport const useSelector: TypedUseSelectorHook<RootState> = rawUseSelector;\nexport type AppDispatch = typeof store.dispatch;\n","import { ID_TYPE, MODEL_TYPE, PREFIX_TYPE, SIGNATURE_TYPE } from 'models';\nimport { baseModel } from 'models/baseModel';\nimport { claim_id_prefix, id_is_mClaim, mClaim, mClaimSignature } from 'models/mClaim';\nimport { evidence_id_prefix, id_is_mEvidence, mEvidence, mEvidenceSignature } from 'models/mEvidence';\nimport { id_is_mMatch, match_id_prefix, mMatch, mMatchSignature } from 'models/mMatch';\nimport { id_is_mPart, mPart, mPartSignature, part_id_prefix } from 'models/mPart';\nimport { id_is_mPoint, mPoint, mPointSignature, PointChild, PointParent, point_id_prefix } from 'models/mPoint';\nimport { id_is_mSide, mSide, mSideSignature, side_id_prefix } from 'models/mSide';\nimport { store } from 'stores';\nimport { claim_slice } from 'stores/slices/claim';\nimport { evidence_slice } from 'stores/slices/evidence';\nimport { match_slice } from 'stores/slices/match';\nimport { part_slice } from 'stores/slices/part';\nimport { point_slice } from 'stores/slices/point';\nimport { side_slice } from 'stores/slices/side';\nimport { assertNever } from 'util/utilityTypes';\n\nexport const id_to_type: {\n  (id: mMatch['id']): typeof mMatchSignature;\n  (id: mSide['id']): typeof mSideSignature;\n  (id: mPart['id']): typeof mPartSignature;\n  (id: mPoint['id']): typeof mPointSignature;\n  (id: mClaim['id']): typeof mClaimSignature;\n  (id: mEvidence['id']): typeof mEvidenceSignature;\n  (id: PointParent['id']): PointParent['type_signature'];\n  (id: PointChild['id']): PointChild['type_signature'];\n  (id: ID_TYPE): SIGNATURE_TYPE;\n} = (id: ID_TYPE): any => {\n  if (id_is_mMatch(id)) return mMatchSignature;\n  if (id_is_mSide(id)) return mSideSignature;\n  if (id_is_mPart(id)) return mPartSignature;\n  if (id_is_mPoint(id)) return mPointSignature;\n  if (id_is_mClaim(id)) return mClaimSignature;\n  if (id_is_mEvidence(id)) return mEvidenceSignature;\n  assertNever(id);\n};\nexport const type_to_store = {\n  [mMatchSignature]: () => store.getState().match,\n  [mSideSignature]: () => store.getState().side,\n  [mPartSignature]: () => store.getState().part,\n  [mPointSignature]: () => store.getState().point,\n  [mClaimSignature]: () => store.getState().claim,\n  [mEvidenceSignature]: () => store.getState().evidence,\n};\nexport const id_to_store: {\n  (id: mMatch['id']): typeof type_to_store[typeof mMatchSignature];\n  (id: mSide['id']): typeof type_to_store[typeof mSideSignature];\n  (id: mPart['id']): typeof type_to_store[typeof mPartSignature];\n  (id: mPoint['id']): typeof type_to_store[typeof mPointSignature];\n  (id: mClaim['id']): typeof type_to_store[typeof mClaimSignature];\n  (id: mEvidence['id']): typeof type_to_store[typeof mEvidenceSignature];\n  (id: PointParent['id']): typeof type_to_store[PointParent['type_signature']];\n  (id: PointChild['id']): typeof type_to_store[PointChild['type_signature']];\n  (id: ID_TYPE): typeof type_to_store[SIGNATURE_TYPE];\n} = (id: ID_TYPE): any => {\n  const type = id_to_type(id);\n  return type_to_store[type];\n};\nexport const type_to_slice = {\n  [mMatchSignature]: match_slice,\n  [mSideSignature]: side_slice,\n  [mPartSignature]: part_slice,\n  [mPointSignature]: point_slice,\n  [mClaimSignature]: claim_slice,\n  [mEvidenceSignature]: evidence_slice,\n};\nexport const id_to_slice: {\n  (id: mMatch['id']): typeof type_to_slice[typeof mMatchSignature];\n  (id: mSide['id']): typeof type_to_slice[typeof mSideSignature];\n  (id: mPart['id']): typeof type_to_slice[typeof mPartSignature];\n  (id: mPoint['id']): typeof type_to_slice[typeof mPointSignature];\n  (id: mClaim['id']): typeof type_to_slice[typeof mClaimSignature];\n  (id: mEvidence['id']): typeof type_to_slice[typeof mEvidenceSignature];\n  (id: PointParent['id']): typeof type_to_slice[PointParent['type_signature']];\n  (id: PointChild['id']): typeof type_to_slice[PointChild['type_signature']];\n  (id: ID_TYPE): typeof type_to_slice[SIGNATURE_TYPE];\n} = (id: ID_TYPE): any => {\n  const type = id_to_type(id);\n  if (type !== undefined) return type_to_slice[type];\n};\n\nexport const get_from_id: {\n  (id: mMatch['id']): mMatch | undefined;\n  (id: mSide['id']): mSide | undefined;\n  (id: mPart['id']): mPart | undefined;\n  (id: mPoint['id']): mPoint | undefined;\n  (id: mClaim['id']): mClaim | undefined;\n  (id: mEvidence['id']): mEvidence | undefined;\n  (id: PointParent['id']): PointParent | undefined;\n  (id: PointChild['id']): PointChild | undefined;\n  (id: ID_TYPE): MODEL_TYPE | undefined;\n} = (id: ID_TYPE): any => {\n  const type_store = id_to_store(id);\n  if (type_store === undefined) return;\n  return type_store().entities[id];\n};\n\n// 引数idに対応する要素がなければundefined、idの要素に親がなければnull\nexport const get_parent_id: {\n  (id: mMatch['id']): null | undefined;\n  (id: mSide['id']): mSide['parent'] | undefined;\n  (id: mPart['id']): mPart['parent'] | undefined;\n  (id: mPoint['id']): mPoint['parent'] | undefined;\n  (id: mClaim['id']): mClaim['parent'] | undefined;\n  (id: mEvidence['id']): mEvidence['parent'] | undefined;\n  (id: mClaim['id'] | mEvidence['id']): mPoint['id'] | undefined;\n  (id: PointParent['id']): PointParent['parent'] | undefined;\n  (id: PointChild['id']): PointChild['parent'] | undefined;\n  (id: ID_TYPE): ID_TYPE | undefined;\n} = (id: ID_TYPE): any => {\n  const type_signature = id_to_type(id);\n  if (type_signature === undefined || type_signature === mMatchSignature) return null;\n  return type_to_store[type_signature]().entities[id]?.parent;\n};\nexport const next_content_id: {\n  (id: mMatch['id']): mMatch['id'] | undefined;\n  (id: mSide['id']): mSide['id'] | undefined;\n  (id: mPart['id']): mPart['id'] | undefined;\n  (id: PointChild['id']): PointChild['id'] | undefined;\n  (id: ID_TYPE): ID_TYPE | undefined;\n} = (id: ID_TYPE): any => {\n  const parent_id = get_parent_id(id);\n  if (parent_id === null || parent_id === undefined) return;\n  const parent_type = id_to_type(parent_id);\n  if (parent_type === undefined) return;\n  const sibling_list = type_to_store[parent_type]().entities[parent_id]?.contents;\n  if (!Array.isArray(sibling_list)) return;\n  const item_index = sibling_list.findIndex((v) => v === id);\n  if (item_index === -1 || item_index >= sibling_list.length - 1) return;\n  return sibling_list[item_index + 1];\n};\n\nconst id_to_prefix: {\n  (id: mMatch['id']): typeof match_id_prefix;\n  (id: mSide['id']): typeof side_id_prefix;\n  (id: mPart['id']): typeof part_id_prefix;\n  (id: mPoint['id']): typeof point_id_prefix;\n  (id: mClaim['id']): typeof claim_id_prefix;\n  (id: mEvidence['id']): typeof evidence_id_prefix;\n  (id: PointParent['id']): typeof part_id_prefix | typeof point_id_prefix;\n  (id: PointChild['id']): typeof point_id_prefix | typeof claim_id_prefix | typeof evidence_id_prefix;\n  (id: ID_TYPE): PREFIX_TYPE;\n} = (id: ID_TYPE): any => {\n  if (id_is_mMatch(id)) return match_id_prefix;\n  if (id_is_mSide(id)) return side_id_prefix;\n  if (id_is_mPart(id)) return part_id_prefix;\n  if (id_is_mPoint(id)) return point_id_prefix;\n  if (id_is_mClaim(id)) return claim_id_prefix;\n  if (id_is_mEvidence(id)) return evidence_id_prefix;\n};\n// return: a<=>b\nexport const compare_id = (a: ID_TYPE, b: ID_TYPE): number => {\n  const a_prefix = id_to_prefix(a);\n  if (a_prefix === undefined) throw TypeError('argument `a` is invalid ID');\n  const b_prefix = id_to_prefix(b);\n  if (b_prefix === undefined) throw TypeError('argument `b` is invalid ID');\n  if (a_prefix !== b_prefix)\n    throw TypeError(`argument \\`a\\` and \\`b\\` are of different type: a: ${id_to_type(a)}, b: a: ${id_to_type(b)}`);\n  const a_number = parseInt(a.replace(a_prefix, ''));\n  const b_number = parseInt(b.replace(a_prefix, ''));\n  if (Number.isNaN(a_number) || Number.isNaN(b_number)) throw TypeError('arguments could not parsed into number');\n  return a_number - b_number;\n};\n","export type ValueOf<T> = T;\nexport const assertNever = (v: never): never => {\n  throw TypeError(`Unexpected object: ${v}`);\n};\n","import { store } from '../index';\nimport { claim_slice } from '../slices/claim';\nimport { evidence_slice } from '../slices/evidence';\nimport { match_slice } from '../slices/match';\nimport { part_slice } from '../slices/part';\nimport { point_slice } from '../slices/point';\nimport { side_slice } from '../slices/side';\nimport { claim_id_prefix, mClaimId } from 'models/mClaim';\nimport { evidence_id_prefix, mEvidenceId } from 'models/mEvidence';\nimport { match_id_prefix, mMatchId } from 'models/mMatch';\nimport { mPartId, part_id_prefix } from 'models/mPart';\nimport { mPointId, point_id_prefix } from 'models/mPoint';\nimport { mSideId, side_id_prefix } from 'models/mSide';\n\nexport const generate_evidence_id = (): mEvidenceId => {\n  const id_number = store.getState().evidence.last_id_number;\n  store.dispatch(evidence_slice.actions.incrementID());\n  return `${evidence_id_prefix}${id_number}`;\n};\n\nexport const generate_claim_id = (): mClaimId => {\n  const id_number = store.getState().claim.last_id_number;\n  store.dispatch(claim_slice.actions.incrementID());\n  return `${claim_id_prefix}${id_number}`;\n};\n\nexport const generate_point_id = (): mPointId => {\n  const id_number = store.getState().point.last_id_number;\n  store.dispatch(point_slice.actions.incrementID());\n  return `${point_id_prefix}${id_number}`;\n};\n\nexport const generate_part_id = (): mPartId => {\n  const id_number = store.getState().part.last_id_number;\n  store.dispatch(part_slice.actions.incrementID());\n  return `${part_id_prefix}${id_number}`;\n};\n\nexport const generate_side_id = (): mSideId => {\n  const id_number = store.getState().side.last_id_number;\n  store.dispatch(side_slice.actions.incrementID());\n  return `${side_id_prefix}${id_number}`;\n};\n\nexport const generate_match_id = (): mMatchId => {\n  const id_number = store.getState().match.last_id_number;\n  store.dispatch(match_slice.actions.incrementID());\n  return `${match_id_prefix}${id_number}`;\n};\n","import { get_from_id, get_parent_id } from './id';\nimport { part_add_child } from './part';\nimport { switch_for_append, point_add_child, switch_for_append_id } from './point';\nimport { baseModel } from 'models/baseModel';\nimport { mEvidence, mEvidenceSignature } from 'models/mEvidence';\nimport { is_mPoint } from 'models/mPoint';\nimport { store } from 'stores';\nimport { generate_evidence_id } from 'stores/ids/id_generators';\nimport { evidence_slice } from 'stores/slices/evidence';\nimport { point_slice } from 'stores/slices/point';\n\nexport const generate_evidence = (\n  parent: mEvidence['parent'],\n  from?: Partial<Omit<mEvidence, 'id' | 'content'>>,\n): mEvidence => {\n  const parent_obj = get_from_id(parent);\n  if (!is_mPoint(parent_obj)) throw TypeError('argument `parent` does not match mPoint');\n  const generated: mEvidence = {\n    ...from,\n    type_signature: mEvidenceSignature,\n    id: generate_evidence_id(),\n    parent,\n  };\n  store.dispatch(evidence_slice.actions.add(generated));\n  store.dispatch(point_slice.actions.addChild([parent, generated.id]));\n  return generated;\n};\n\nexport const append_evidence = (parent_id: switch_for_append_id): mEvidence | undefined => {\n  return switch_for_append(\n    parent_id,\n    (id) => append_evidence(part_add_child(id).id),\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id !== undefined && parent_id !== null) return append_evidence(parent_id);\n    },\n    (id) => point_add_child(id, mEvidenceSignature),\n  );\n};\n","import { generate_claim } from './claim';\nimport { generate_evidence } from './evidence';\nimport {\n  get_parent_id,\n  next_content_id,\n  id_to_store,\n  id_to_type,\n  type_to_store,\n  get_from_id,\n  id_to_slice,\n  compare_id,\n} from './id';\nimport { part_add_child } from './part';\nimport { ValidationError } from 'errors';\nimport { baseModel } from 'models/baseModel';\nimport { id_is_mClaim, mClaim, mClaimSignature } from 'models/mClaim';\nimport { id_is_mEvidence, mEvidence, mEvidenceSignature } from 'models/mEvidence';\nimport { mMatchSignature } from 'models/mMatch';\nimport { id_is_mPart, is_mPart, mPart, part_id_prefix } from 'models/mPart';\nimport {\n  id_is_mPoint,\n  id_is_PointChild,\n  is_mPoint,\n  mPoint,\n  mPointSignature,\n  PointChild,\n  PointParent,\n} from 'models/mPoint';\nimport { store } from 'stores';\nimport { generate_point_id } from 'stores/ids/id_generators';\nimport { claim_slice } from 'stores/slices/claim';\nimport { evidence_slice } from 'stores/slices/evidence';\nimport { part_slice } from 'stores/slices/part';\nimport { point_slice } from 'stores/slices/point';\nimport { assertNever } from 'util/utilityTypes';\n\nexport const generate_point = (\n  parent: mPoint['parent'],\n  from?: Partial<Omit<mPoint, 'type_signature' | 'id' | 'parent'>>,\n  empty: boolean = false,\n): mPoint => {\n  const parent_obj = get_from_id(parent);\n  if (!is_mPart(parent_obj) && !is_mPoint(parent_obj)) throw TypeError('argument `parent` does not match mPart|mPoint');\n  const generated: mPoint = {\n    ...from,\n    type_signature: mPointSignature,\n    id: generate_point_id(),\n    parent,\n  };\n  store.dispatch(point_slice.actions.add(generated));\n  if (id_is_mPart(parent)) store.dispatch(id_to_slice(parent).actions.addChild([parent, generated.id]));\n  else store.dispatch(id_to_slice(parent).actions.addChild([parent, generated.id])); // NOTE: 同じ処理だが型推論を利かせるために分けている\n  if (!empty) generate_claim(generated.id);\n  return get_from_id(generated.id) || generated;\n};\n\nexport function point_add_child(parent_id: mPoint['id'], type: mPoint['type_signature']): mPoint;\nexport function point_add_child(parent_id: mPoint['id'], type: mClaim['type_signature']): mClaim;\nexport function point_add_child(parent_id: mPoint['id'], type: mEvidence['type_signature']): mEvidence;\nexport function point_add_child(\n  parent_id: mPoint['id'],\n  type: baseModel['type_signature'],\n): mPoint | mEvidence | mClaim {\n  let child: mPoint | mEvidence | mClaim;\n  if (type === mPointSignature) {\n    child = generate_point(parent_id);\n    store.dispatch(point_slice.actions.add(child));\n  } else if (type === mEvidenceSignature) {\n    child = generate_evidence(parent_id);\n    store.dispatch(evidence_slice.actions.add(child));\n  } else {\n    child = generate_claim(parent_id);\n    store.dispatch(claim_slice.actions.add(child));\n  }\n  return child;\n}\nexport const point_set_child = (parent_id: mPoint['id'], child_id: PointChild['id']): void => {\n  store.dispatch(point_slice.actions.addChild([parent_id, child_id]));\n};\n\nexport const reorder_child: {\n  (parent: mPoint['id'], target: PointChild['id'], before: PointChild['id'] | null): void;\n  (parent: mPart['id'], target: mPoint['id'], before: mPoint['id'] | null): void;\n} = (parent: PointParent['id'], target: PointChild['id'], before: PointChild['id'] | null): void => {\n  if (!id_is_mPoint(parent) && !id_is_mPart(parent)) throw TypeError('argument `parent` does not match mPoint|mPart');\n  if (id_is_mPoint(parent)) store.dispatch(point_slice.actions.reorderChild([parent, target, before]));\n  else {\n    if (!id_is_mPoint(target)) throw TypeError('argument `target` does not match mPoint (parent is mPart)');\n    if (before !== null && !id_is_mPoint(before))\n      throw TypeError('argument `before` does not match mPoint|null (parent is mPart)');\n    store.dispatch(part_slice.actions.reorderChild([parent, target, before]));\n  }\n};\n\nexport const get_ancestor_point = (descendent_id: PointChild['id']): mPoint['id'] | undefined => {\n  let parent_id: typeof descendent_id | null | undefined = descendent_id;\n  while (parent_id && !id_is_mPoint(parent_id)) {\n    parent_id = get_parent_id(parent_id);\n  }\n  return parent_id ?? undefined;\n};\nexport const get_ancestor_part = (descendent_id: mPart['id'] | PointChild['id']): mPart['id'] | undefined => {\n  let parent_id: typeof descendent_id | null | undefined = descendent_id;\n  while (parent_id && !id_is_mPart(parent_id)) {\n    parent_id = get_parent_id(parent_id);\n  }\n  return parent_id ?? undefined;\n};\nexport type switch_for_append_id = mPart['id'] | mPoint['id'] | mClaim['id'] | mEvidence['id'];\nexport const is_switch_for_append_id = (v: unknown): v is switch_for_append_id => {\n  return id_is_mPart(v) || id_is_mPoint(v) || id_is_mClaim(v) || id_is_mEvidence(v);\n};\nexport const switch_for_append = <T>(\n  id: switch_for_append_id,\n  part: (id: mPart['id']) => T,\n  claim_evi: (id: mClaim['id'] | mEvidence['id']) => T,\n  point: (id: mPoint['id']) => T,\n): T | undefined => {\n  if (id_is_mPart(id)) return part(id);\n  if (id_is_mEvidence(id) || id_is_mClaim(id)) return claim_evi(id);\n  if (id_is_mPoint(id)) return point(id);\n};\nexport const append_sibling_point = (parent_id: switch_for_append_id): mPoint | undefined => {\n  return switch_for_append(\n    parent_id,\n    (id) => part_add_child(id),\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id === undefined || parent_id === null) return;\n      return append_sibling_point(parent_id);\n    },\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id === undefined || parent_id === null) return;\n      return switch_for_append<mPoint | undefined>(\n        parent_id,\n        (parent_id) => {\n          const child = id_is_mPoint(parent_id)\n            ? point_add_child(parent_id, mPointSignature)\n            : part_add_child(parent_id);\n          const reorder_before = next_content_id(id) as mPoint['id'] | undefined;\n          if (reorder_before === undefined) return;\n          reorder_child(parent_id, child.id, reorder_before);\n          return child;\n        },\n        (parent_id) => {\n          throw TypeError('parent_id does not match mPart|mPoint');\n        },\n        (parent_id) => {\n          const child = id_is_mPoint(parent_id)\n            ? point_add_child(parent_id, mPointSignature)\n            : part_add_child(parent_id);\n          const reorder_before = next_content_id(id);\n          if (reorder_before === undefined) return;\n          reorder_child(parent_id, child.id, reorder_before);\n          return child;\n        },\n      );\n    },\n  );\n};\nexport const append_point_to_parent = (parent_id: switch_for_append_id): mPoint | undefined => {\n  return switch_for_append(\n    parent_id,\n    (id) => part_add_child(id),\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id === undefined || parent_id === null) return;\n      return append_point_to_parent(parent_id);\n    },\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id === undefined || parent_id === null) return;\n      if (id_is_mPart(parent_id)) return append_sibling_point(id);\n      return append_sibling_point(parent_id);\n    },\n  );\n};\nexport const append_point_to_part = (parent_id: switch_for_append_id): mPoint | undefined => {\n  const _parent_id = get_ancestor_part(parent_id);\n  let child: mPoint | undefined = undefined;\n  if (_parent_id && id_is_mPart(_parent_id)) child = part_add_child(_parent_id);\n  return child;\n};\nexport const append_point_child = (parent_id: switch_for_append_id): mPoint | undefined => {\n  return switch_for_append(\n    parent_id,\n    (id) => part_add_child(id),\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id === undefined || parent_id === null) return;\n      const child = append_point_child(parent_id);\n      if (child === undefined) return;\n      const reorder_before = next_content_id(id);\n      if (reorder_before === undefined) return;\n      reorder_child(parent_id, child.id, reorder_before);\n      return child;\n    },\n    (id) => point_add_child(id, mPointSignature),\n  );\n};\n\nexport const set_rebut = (end1: mPoint['id'], end2: mPoint['id'] | undefined) => {\n  let from: mPoint['id'], to: mPoint['id'] | undefined;\n  if (end2 == undefined) {\n    [from, to] = [end1, end2];\n  } else {\n    [to, from] = [end1, end2].sort((end1, end2) => {\n      const part1 = get_ancestor_part(end1);\n      if (part1 === undefined) throw TypeError('argument `end1` is not descendent of mPart');\n      const part2 = get_ancestor_part(end2);\n      if (part2 === undefined) throw TypeError('argument `end2` is not descendent of mPart');\n      return compare_id(part1, part2);\n    });\n  }\n  const obj = get_from_id(from);\n  if (!is_mPoint(obj)) throw TypeError('param `from` does not match mPoint');\n  store.dispatch(\n    point_slice.actions.upsertOne({\n      ...obj,\n      rebut_to: to,\n    }),\n  );\n};\nexport const set_rebut_to = (from: PointChild['id']) => (rebut_to: PointChild['id']) => {\n  const point_rebut_to = get_ancestor_point(rebut_to);\n  const point_from = get_ancestor_point(from);\n  if (point_rebut_to && point_from) set_rebut(point_rebut_to, point_from);\n};\n\nexport const add_rebut = (rebut_to: mPoint['id'], part: mPart['id']) => {\n  const part_rebut_to = get_ancestor_part(rebut_to);\n  if (part_rebut_to === undefined) throw TypeError('argument `rebut_to` is not descendent of mPart');\n  if (compare_id(part_rebut_to, part) >= 0) throw new ValidationError('cannot rebut to point in later parts');\n  const rebut_obj = part_add_child(part);\n  set_rebut(rebut_to, rebut_obj.id);\n  return rebut_obj;\n};\nexport const add_rebut_to = (part: mPart['id']) => (rebut_to: mPoint['id']) => add_rebut(rebut_to, part);\n","export class ValidationError extends Error {}\n","import { get_from_id } from './id';\nimport { baseModel } from 'models/baseModel';\nimport { mPart, mPartSignature } from 'models/mPart';\nimport { mPoint } from 'models/mPoint';\nimport { is_mSide } from 'models/mSide';\nimport { generate_point } from 'services/point';\nimport { store } from 'stores';\nimport { generate_part_id } from 'stores/ids/id_generators';\nimport { part_slice } from 'stores/slices/part';\nimport { point_slice } from 'stores/slices/point';\nimport { side_slice } from 'stores/slices/side';\n\nexport const generate_part = (\n  parent: mPart['parent'],\n  from?: Partial<Omit<mPart, 'type_signature' | 'id' | 'parent'>>,\n  empty: boolean = false,\n): mPart => {\n  const parent_obj = get_from_id(parent);\n  if (!is_mSide(parent_obj)) throw TypeError('argument `parent` does not match mSide');\n  if (from !== undefined && 'contents' in from) empty = true;\n  const generated: mPart = {\n    ...from,\n    type_signature: mPartSignature,\n    id: generate_part_id(),\n    parent,\n  };\n  store.dispatch(part_slice.actions.add(generated));\n  const child_point = empty ? undefined : generate_point(generated.id); // NOTE: 仮実装\n  store.dispatch(side_slice.actions.addChild([parent, generated.id]));\n  return (get_from_id(generated.id) as mPart | undefined) ?? generated;\n};\n\nexport const part_add_child = (parent_id: mPart['id']) => {\n  const child = generate_point(parent_id);\n  store.dispatch(point_slice.actions.add(child));\n  return child;\n};\n\nexport const part_set_child = (parent_id: mPart['id'], child_id: mPoint['id']): void => {\n  store.dispatch(part_slice.actions.addChild([parent_id, child_id]));\n};\n","import { get_from_id, get_parent_id } from './id';\nimport { part_add_child } from './part';\nimport { switch_for_append, point_add_child, switch_for_append_id } from './point';\nimport { baseModel } from 'models/baseModel';\nimport { mClaim, mClaimSignature } from 'models/mClaim';\nimport { is_mPoint, mPoint } from 'models/mPoint';\nimport { store } from 'stores';\nimport { generate_claim_id } from 'stores/ids/id_generators';\nimport { claim_slice } from 'stores/slices/claim';\nimport { point_slice } from 'stores/slices/point';\n\nexport const generate_claim = (parent: mClaim['parent'], from?: Partial<Omit<mClaim, 'id'>>): mClaim => {\n  const parent_obj = get_from_id(parent);\n  if (!is_mPoint(parent_obj)) throw TypeError('argument `parent` does not match mPoint');\n  const generated: mClaim = {\n    ...from,\n    type_signature: mClaimSignature,\n    id: generate_claim_id(),\n    parent,\n  };\n  store.dispatch(claim_slice.actions.add(generated));\n  store.dispatch(point_slice.actions.addChild([parent, generated.id]));\n  return generated;\n};\n\nexport const append_claim = (parent_id: switch_for_append_id): mClaim | undefined => {\n  return switch_for_append(\n    parent_id,\n    (id) => append_claim(part_add_child(id).id),\n    (id) => {\n      const parent_id = get_parent_id(id);\n      if (parent_id !== undefined && parent_id !== null) return append_claim(parent_id);\n    },\n    (id) => point_add_child(id, mClaimSignature),\n  );\n};\n","import { decodeResult, idMap } from './loader';\nimport { is_mClaim, mClaim } from 'models/mClaim';\nimport { mPoint } from 'models/mPoint';\nimport { generate_claim } from 'services/claim';\nimport { get_from_id } from 'services/id';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport interface ClaimOutputObj {\n  claim: {\n    '@id': mClaim['id'];\n    '#': mClaim['contents'];\n  };\n}\n\nexport const encodeClaim = (id: mClaim['id']): ClaimOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mClaim(model)) return undefined;\n  return {\n    claim: {\n      '@id': id,\n      '#': model['contents'],\n    },\n  };\n};\n\nexport interface ClaimInputObj {\n  '#name': 'claim';\n  '_': string;\n  '$': {\n    id: string;\n  };\n}\nexport const isClaimInputObj = (v: unknown): v is ClaimInputObj => {\n  return (\n    isObject<ClaimInputObj>(v) &&\n    v['#name'] === 'claim' &&\n    typeof v['_'] === 'string' &&\n    isObject<ClaimInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\n\nexport const decodeClaim = (obj: object, parent: mPoint['id'], idMap: idMap): decodeResult<mClaim> => {\n  if (!isClaimInputObj(obj)) return { id: undefined, idMap };\n  const generated = generate_claim(parent, { contents: obj['_'] });\n  idMap.set(obj['$'].id, generated.id);\n  return { id: generated.id, idMap };\n};\n","import { decodeResult, idMap } from './loader';\nimport { is_mEvidence, mEvidence } from 'models/mEvidence';\nimport { mPoint } from 'models/mPoint';\nimport { generate_evidence } from 'services/evidence';\nimport { get_from_id } from 'services/id';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport interface EvidenceOutputObj {\n  evidence: {\n    '@id': mEvidence['id'];\n    '@about_author'?: mEvidence['about_author'];\n    '@author'?: mEvidence['author'];\n    '@year'?: mEvidence['year'];\n    '#'?: mEvidence['contents'];\n  };\n}\n\nexport const encodeEvidence = (id: mEvidence['id']): EvidenceOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mEvidence(model)) return undefined;\n  return {\n    evidence: {\n      '@id': id,\n      '@about_author': model['about_author'],\n      '@author': model['author'],\n      '@year': model['year'],\n      '#': model['contents'],\n    },\n  };\n};\n\nexport interface EvidenceInputObj {\n  '#name': 'evidence';\n  '_': string;\n  '$': {\n    id: string;\n    about_author?: string;\n    author?: string;\n    year?: string;\n  };\n}\nexport const isEvidenceInputObj = (v: unknown): v is EvidenceInputObj => {\n  return (\n    isObject<EvidenceInputObj>(v) &&\n    v['#name'] === 'evidence' &&\n    typeof v['_'] === 'string' &&\n    isObject<EvidenceInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\n\nexport const decodeEvidence = (obj: object, parent: mPoint['id'], idMap: idMap): decodeResult<mEvidence> => {\n  if (!isEvidenceInputObj(obj)) return { id: undefined, idMap };\n  const generated = generate_evidence(parent, {\n    contents: obj['_'],\n    about_author: obj['$'].about_author,\n    author: obj['$'].author,\n    year: obj['$'].year,\n  });\n  idMap.set(obj['$'].id, generated.id);\n  return { id: generated.id, idMap };\n};\n","import { ClaimInputObj, ClaimOutputObj, decodeClaim, encodeClaim } from './claim';\nimport { decodeEvidence, encodeEvidence, EvidenceInputObj, EvidenceOutputObj } from './evidence';\nimport { decodeResult, idMap } from './loader';\nimport { id_is_mClaim, is_mClaim, mClaim } from 'models/mClaim';\nimport { id_is_mEvidence, is_mEvidence, mEvidence } from 'models/mEvidence';\nimport { mPart } from 'models/mPart';\nimport { id_is_mPoint, is_mPoint, mPoint, PointChild } from 'models/mPoint';\nimport { get_from_id } from 'services/id';\nimport { generate_point, point_set_child } from 'services/point';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport interface PointOutputObj {\n  point: {\n    '@id': mPoint['id'];\n    '@numbering'?: mPoint['numbering'];\n    '@rebut_to'?: mPoint['rebut_to'];\n    '#'?: (PointOutputObj | EvidenceOutputObj | ClaimOutputObj)[];\n  };\n}\n\nconst encodeChild = (id: PointChild['id']): PointOutputObj | EvidenceOutputObj | ClaimOutputObj | undefined => {\n  if (id_is_mPoint(id)) return encodePoint(id);\n  if (id_is_mEvidence(id)) return encodeEvidence(id);\n  if (id_is_mClaim(id)) return encodeClaim(id);\n  return undefined;\n};\nconst isChildObj = (v: ReturnType<typeof encodeChild>): v is PointOutputObj | EvidenceOutputObj | ClaimOutputObj =>\n  v !== undefined;\n\nexport const encodePoint = (id: mPoint['id']): PointOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mPoint(model)) return undefined;\n  return {\n    point: {\n      '@id': id,\n      '@numbering': model['numbering'],\n      '@rebut_to': model['rebut_to'],\n      '#': model.contents?.map(encodeChild).filter(isChildObj) ?? [],\n    },\n  };\n};\n\nexport interface PointInputObj {\n  '#name': 'point';\n  '$': {\n    id: string;\n    numbering?: string;\n    rebut_to?: string;\n  };\n  '$$'?: (PointInputObj | ClaimInputObj | EvidenceInputObj)[];\n}\nexport const isPointInputObj = (v: unknown): v is PointInputObj => {\n  return (\n    isObject<PointInputObj>(v) &&\n    v['#name'] === 'point' &&\n    (Array.isArray(v['$$']) || v['$$'] === undefined) &&\n    isObject<PointInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\n\nconst decodePointChild = (\n  obj: object,\n  parent: mPoint['id'],\n  idMap: idMap,\n): decodeResult<mPoint | mClaim | mEvidence> => {\n  if (isObject<{ '#name': string }>(obj)) {\n    if (obj['#name'] === 'point') return decodePoint(obj, parent, idMap);\n    if (obj['#name'] === 'claim') return decodeClaim(obj, parent, idMap);\n    if (obj['#name'] === 'evidence') return decodeEvidence(obj, parent, idMap);\n  }\n  return { id: undefined, idMap };\n};\n\nexport const decodePoint = (obj: object, parent: mPart['id'] | mPoint['id'], idMap: idMap): decodeResult<mPoint> => {\n  if (!isPointInputObj(obj)) return { id: undefined, idMap };\n  const rebut_to = obj['$'].rebut_to ? idMap.get(obj['$'].rebut_to) : undefined;\n  const generated = generate_point(\n    parent,\n    {\n      numbering: obj['$'].numbering,\n      rebut_to: id_is_mPoint(rebut_to) ? rebut_to : undefined,\n    },\n    true,\n  );\n  idMap.set(obj['$'].id, generated.id);\n  if (Array.isArray(obj['$$']))\n    idMap = obj['$$'].reduce((idMap, v) => decodePointChild(v, generated.id, idMap).idMap, idMap);\n  return { id: generated.id, idMap };\n};\n","import { decodeResult, idMap } from './loader';\nimport { decodePoint, encodePoint, PointInputObj, PointOutputObj } from './point';\nimport { is_mPart, mPart } from 'models/mPart';\nimport { mSide } from 'models/mSide';\nimport { get_from_id } from 'services/id';\nimport { generate_part, part_set_child } from 'services/part';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport interface PartOutputObj {\n  part: {\n    '@id': mPart['id'];\n    '@name'?: mPart['name'];\n    '#'?: PointOutputObj[];\n  };\n}\n\nconst isChildObj = (v: PointOutputObj | undefined): v is PointOutputObj => v !== undefined;\nexport const encodePart = (id: mPart['id']): PartOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mPart(model)) return undefined;\n  return {\n    part: {\n      '@id': id,\n      '@name': model['name'],\n      '#': model.contents?.map(encodePoint).filter(isChildObj),\n    },\n  };\n};\n\nexport interface PartInputObj {\n  '#name': 'part';\n  '$': {\n    id: string;\n    name?: string;\n  };\n  '$$'?: PointInputObj[];\n}\nexport const isPartInputObj = (v: unknown): v is PartInputObj => {\n  return (\n    isObject<PartInputObj>(v) &&\n    v['#name'] === 'part' &&\n    (Array.isArray(v['$$']) || v['$$'] === undefined) &&\n    isObject<PartInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\n\nexport const decodePart = (obj: object, parent: mSide['id'], idMap: idMap): decodeResult<mPart> => {\n  if (!isPartInputObj(obj)) return { id: undefined, idMap };\n  const generated = generate_part(\n    parent,\n    {\n      name: obj['$'].name,\n    },\n    true,\n  );\n  idMap.set(obj['$'].id, generated.id);\n  if (Array.isArray(obj['$$']))\n    idMap = obj['$$'].reduce((idMap, v) => decodePoint(v, generated.id, idMap).idMap, idMap);\n  return { id: generated.id, idMap };\n};\n","import { get_from_id } from './id';\nimport { generate_part } from './part';\nimport { baseModel } from 'models/baseModel';\nimport { is_mMatch, mMatch } from 'models/mMatch';\nimport { mPart } from 'models/mPart';\nimport { mSide, mSideSignature } from 'models/mSide';\nimport { store } from 'stores';\nimport { generate_side_id } from 'stores/ids/id_generators';\nimport { match_slice } from 'stores/slices/match';\nimport { side_slice } from 'stores/slices/side';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport const generate_side = (\n  parent: mMatch['id'],\n  parts?: Array<mPart['name']>,\n  from?: Partial<Omit<mSide, 'type_signature' | 'id' | 'parent' | 'contents'>>,\n): mSide => {\n  const parent_obj = get_from_id(parent);\n  if (!is_mMatch(parent_obj)) throw TypeError('argument `parent` does not match mMatch');\n  const generated: mSide = {\n    ...from,\n    type_signature: mSideSignature,\n    id: generate_side_id(),\n    parent,\n  };\n  store.dispatch(side_slice.actions.add(generated));\n  const contents: mSide['contents'] = [];\n  if (parts !== undefined) {\n    for (const e of parts) {\n      contents.push(generate_part(generated.id, { name: e }).id); // TODO: reduxに保存する処理を追加\n    }\n  }\n  const returned = { ...generated, contents };\n  store.dispatch(side_slice.actions.upsertOne(returned));\n  store.dispatch(match_slice.actions.addChild([parent, generated.id]));\n  return returned;\n};\n","import { decodeResult, idMap } from './loader';\nimport { decodePart, encodePart, PartInputObj, PartOutputObj } from './part';\nimport { is_mSide, mSide } from 'models/mSide';\nimport { get_from_id } from 'services/id';\nimport { generate_side } from 'services/side';\nimport { isObject } from 'util/typeGuardUtils';\n\nexport interface SideOutputObj {\n  side: {\n    '@id': mSide['id'];\n    '@side'?: mSide['side'];\n    '#'?: PartOutputObj[];\n  };\n}\n\nconst isChildObj = (v: PartOutputObj | undefined): v is PartOutputObj => v !== undefined;\nexport const encodeSide = (id: mSide['id']): SideOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mSide(model)) return undefined;\n  return {\n    side: {\n      '@id': id,\n      '@side': model['side'],\n      '#': model.contents?.map(encodePart).filter(isChildObj),\n    },\n  };\n};\n\nexport interface SideInputObj {\n  '#name': 'side';\n  '$': {\n    id: string;\n    side?: string;\n  };\n  '$$'?: PartInputObj[];\n}\nexport const isSideInputObj = (v: unknown): v is SideInputObj => {\n  return (\n    isObject<SideInputObj>(v) &&\n    v['#name'] === 'side' &&\n    (Array.isArray(v['$$']) || v['$$'] === undefined) &&\n    isObject<SideInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\n\nexport const decodeSide = (obj: object, parent: mSide['parent'], idMap: idMap): decodeResult<mSide> => {\n  if (!isSideInputObj(obj)) return { id: undefined, idMap };\n  const generated = generate_side(parent, undefined, {\n    side: obj['$'].side,\n  });\n  idMap.set(obj['$'].id, generated.id);\n  if (Array.isArray(obj['$$'])) idMap = obj['$$'].reduce((idMap, v) => decodePart(v, generated.id, idMap).idMap, idMap);\n  return { id: generated.id, idMap };\n};\n","import { generate_side } from './side';\nimport { mMatch, mMatchSignature } from 'models/mMatch';\nimport { mPart } from 'models/mPart';\nimport { mSide } from 'models/mSide';\nimport { store } from 'stores';\nimport { generate_match_id } from 'stores/ids/id_generators';\nimport { match_slice } from 'stores/slices/match';\n\nexport const generate_match = (\n  sides?: Record<NonNullable<mSide['side']>, Array<mPart['name']>>,\n  from?: Partial<Omit<mMatch, 'id' | 'contents'>>,\n): mMatch => {\n  const generated: mMatch = {\n    ...from,\n    type_signature: mMatchSignature,\n    id: generate_match_id(),\n  };\n  store.dispatch(match_slice.actions.add(generated));\n  const contents: mMatch['contents'] = [];\n  if (sides !== undefined) {\n    for (const i in sides) {\n      contents.push(generate_side(generated.id, sides[i], { side: i }).id);\n    }\n  }\n  const returned = { ...generated, contents };\n  store.dispatch(match_slice.actions.upsertOne(returned));\n  return returned;\n};\n","import { decodeResult, idMap } from './loader';\nimport { decodeSide, encodeSide, SideInputObj, SideOutputObj } from './side';\nimport { is_mMatch, mMatch } from 'models/mMatch';\nimport { get_from_id } from 'services/id';\nimport { generate_match } from 'services/match';\nimport { map_object, map_to_object } from 'util/funcs';\nimport { arrayTypeof, isObject, multipleTypeof } from 'util/typeGuardUtils';\n\nexport interface MatchOutputObj {\n  meta: {\n    topic?: mMatch['topic'];\n    date?: mMatch['date'];\n    side?: mMatch['side'];\n    winner?: mMatch['winner'];\n    opponent?: mMatch['opponent'];\n    members?: {\n      '@part': string | number;\n      '_': string;\n    }[];\n    note?: mMatch['note'];\n  };\n  match?: {\n    '@id': mMatch['id'];\n    '#'?: SideOutputObj[];\n  };\n}\n\nconst isChildObj = (v: SideOutputObj | undefined): v is SideOutputObj => v !== undefined;\nexport const encodeMatch = (id: mMatch['id']): MatchOutputObj | undefined => {\n  const model = get_from_id(id);\n  if (!is_mMatch(model)) return undefined;\n  return {\n    meta: {\n      topic: model['topic'],\n      date: model['date'],\n      side: model['side'],\n      winner: model['winner'],\n      opponent: model['opponent'],\n      members: model['member'] ? map_object(model['member'], (v, k) => ({ '@part': k, '_': v })) : [],\n      note: model['note'],\n    },\n    match: {\n      '@id': id,\n      '#': model.contents?.map(encodeSide).filter(isChildObj),\n    },\n  };\n};\n\nexport interface MetaInputObj {\n  topic?: string[];\n  date?: string[];\n  side?: string[];\n  winner?: string[];\n  opponent?: string[];\n  members?: { _: string; $: { part: string } }[];\n  note?: string[];\n}\nconst isMetaInputObj = (v: unknown): v is MetaInputObj =>\n  isObject<MetaInputObj>(v) &&\n  (v.topic === undefined || arrayTypeof(v.topic, 'string')) &&\n  (v.date === undefined || arrayTypeof(v.date, 'string')) &&\n  (v.side === undefined || arrayTypeof(v.side, 'string')) &&\n  (v.winner === undefined || arrayTypeof(v.winner, 'string')) &&\n  (v.opponent === undefined || arrayTypeof(v.opponent, 'string')) &&\n  (v.note === undefined || arrayTypeof(v.note, 'string')) &&\n  (v.members === undefined ||\n    (Array.isArray(v.members) &&\n      v.members.every(\n        (obj) =>\n          isObject<{ _: string; $: { part: string } }>(obj) &&\n          typeof obj['_'] === 'string' &&\n          isObject<{ part: string }>(obj['$']) &&\n          typeof obj['$'].part === 'string',\n      )));\n\nexport interface MatchInputObj {\n  $: {\n    id: string;\n  };\n  $$?: SideInputObj[];\n}\nconst isMatchInputObj = (v: unknown): v is MatchInputObj => {\n  return (\n    isObject<MatchInputObj>(v) &&\n    (Array.isArray(v['$$']) || v['$$'] === undefined) &&\n    isObject<MatchInputObj['$']>(v['$']) &&\n    typeof v['$'].id === 'string'\n  );\n};\nexport interface decodeMatchInputObj {\n  meta: MetaInputObj;\n  match: MatchInputObj;\n}\nconst is_decodeMatchInputObj = (v: unknown): v is decodeMatchInputObj => {\n  return isObject<decodeMatchInputObj>(v) && isMetaInputObj(v.meta) && isMatchInputObj(v.match);\n};\n\nexport const decodeMatch = (obj: object, idMap: idMap): decodeResult<mMatch> => {\n  if (!is_decodeMatchInputObj(obj)) {\n    console.log('not decodeMatchInputObj');\n    return { id: undefined, idMap };\n  }\n  const generated = generate_match(undefined, {\n    topic: obj.meta.topic?.at(-1),\n    date: obj.meta.date?.at(-1),\n    side: obj.meta.side?.at(-1),\n    winner: obj.meta.winner?.at(-1),\n    opponent: obj.meta.opponent?.at(-1),\n    note: obj.meta.note?.at(-1),\n    member: obj.meta.members ? map_to_object(obj.meta.members, (v) => ({ [v['$'].part]: v['_'] })) : undefined,\n  });\n  idMap.set(obj.match['$'].id, generated.id);\n  if (Array.isArray(obj.match['$$']))\n    idMap = obj.match['$$'].reduce((idMap, v) => decodeSide(v, generated.id, idMap).idMap, idMap);\n  return { id: generated.id, idMap };\n};\n","import { decodeMatch, MetaInputObj, MatchInputObj } from './match';\nimport deepmerge from 'deepmerge';\nimport { ID_TYPE } from 'models';\nimport { baseModel } from 'models/baseModel';\nimport { mMatch } from 'models/mMatch';\nimport { isObject } from 'util/typeGuardUtils';\nimport xml2js from 'xml2js';\n\nexport type idMap = Map<string, ID_TYPE>;\nexport interface decodeResult<T extends baseModel> {\n  id: T['id'] | undefined;\n  idMap: idMap;\n}\ninterface dflow_obj {\n  root: {\n    '#name': 'root';\n    'meta': MetaInputObj[];\n    'match': MatchInputObj[];\n  };\n}\nconst is_dflow_obj = (v: unknown): v is dflow_obj => {\n  return (\n    isObject<dflow_obj>(v) &&\n    isObject<dflow_obj['root']>(v.root) &&\n    Array.isArray(v.root.meta) &&\n    Array.isArray(v.root.match)\n  );\n};\n\nconst decodeXML_obj = (obj: object): decodeResult<mMatch> => {\n  const idMap: idMap = new Map();\n  if (!is_dflow_obj(obj)) return { id: undefined, idMap };\n  return decodeMatch(\n    {\n      meta: deepmerge.all(obj.root.meta),\n      match: obj.root.match[0],\n    },\n    idMap,\n  );\n};\n\nexport const string_to_mMatch = async (xml: string): Promise<mMatch['id'] | undefined> => {\n  const xml_obj = await xml2js.parseStringPromise(xml, {\n    explicitChildren: true,\n    preserveChildrenOrder: true,\n  });\n  return decodeXML_obj(xml_obj)?.id;\n};\n","import { css } from '@emotion/react';\nimport { mMatch } from 'models/mMatch';\nimport React, { useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { useModal } from 'react-hooks-use-modal';\nimport { FaTimes } from 'react-icons/fa';\nimport { string_to_mMatch } from 'repositories/loader';\n\nconst loadFileWrapStyle = css`\n  position: relative;\n  width: 70vw;\n  max-width: 600px;\n  max-height: 80vh;\n  padding: 24px 40px 16px;\n  border-radius: 8px;\n  background-color: white;\n`;\nconst loadFileCloseStyle = css`\n  display: inline-block;\n  position: absolute;\n  width: 32px;\n  right: 8px;\n  top: 8px;\n  cursor: pointer;\n  color: #000;\n  &:hover {\n    color: #333;\n  }\n`;\nconst loadFileTitleStyle = css`\n  font-size: 1.5em;\n`;\nconst loadFileDropzoneStyle = css`\n  width: 80%;\n  height: 8em;\n  border: dashed 2px #888;\n  border-radius: 4px;\n  text-align: center;\n  > span {\n    line-height: 2;\n  }\n`;\n\nexport type useLoadFileModal = (\n  setMatchID: React.Dispatch<React.SetStateAction<mMatch['id'] | undefined>>,\n  setFileName: React.Dispatch<React.SetStateAction<string | undefined>>,\n) => [React.VFC<{}>, () => void, () => void, boolean];\nexport const useLoadFileModal: useLoadFileModal = (setMatchID, setFileName) => {\n  const [Modal, open, close, isModalOpen] = useModal('root', {\n    preventScroll: true,\n  });\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      if (acceptedFiles.length < 1 || !(acceptedFiles[0] instanceof File)) return;\n      const text = await acceptedFiles[0].text();\n      const match = await string_to_mMatch(text);\n      if (match === undefined) {\n        alert('ファイルの読み込みに失敗しました');\n        return;\n      }\n      setMatchID(match);\n      setFileName(acceptedFiles[0].name);\n      close();\n    },\n    [setMatchID],\n  );\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n  return [\n    useCallback(\n      () => (\n        <Modal>\n          <div id='load-file-wrap' css={loadFileWrapStyle}>\n            <div className='close' css={loadFileCloseStyle} onClick={close}>\n              <FaTimes title='Close the load-file modal' size={32} />\n            </div>\n            <div className='title' css={loadFileTitleStyle}>\n              フローシートファイル (*.dflow) の読み込み\n            </div>\n            <div {...getRootProps({ className: 'dropzone', css: loadFileDropzoneStyle })}>\n              <span>\n                {isDragActive ? 'ここにファイルをドロップ' : 'ファイルをドラッグ&ドロップ または ここをクリック'}\n              </span>\n              <input {...getInputProps({ name: 'load-file-input', className: 'file-input' })} />\n            </div>\n          </div>\n        </Modal>\n      ),\n      [close, getRootProps, getInputProps, isDragActive, isModalOpen],\n    ),\n    open,\n    close,\n    isModalOpen,\n  ];\n};\n","import { css } from '@emotion/react';\nimport React, { useState, useCallback, forwardRef, useRef, useEffect } from 'react';\n\nexport interface TextInputProps<T extends HTMLElement> {\n  onClick?: React.MouseEventHandler<T>;\n  onChange?: React.ChangeEventHandler<T>;\n  onInput?: React.FormEventHandler<T>;\n  onBlur?: React.FocusEventHandler<T>;\n  onFocus?: React.FocusEventHandler<T>;\n  onKeyPress?: React.KeyboardEventHandler<T>;\n  value?: string;\n  placeholder?: string;\n  key?: React.Key;\n  id?: string;\n  className?: string;\n  css?: ReturnType<typeof css>;\n}\n\nconst empty_event_handler: React.EventHandler<React.SyntheticEvent> = () => {};\n\nconst styleTextInput = css`\n  border: solid 1px #ccc;\n  border-radius: 0;\n  &:placeholder-shown {\n    border: none;\n    background-color: #ccc;\n  }\n  &:focus {\n    border: solid 1px #aaa;\n    background: none;\n    outline: none;\n  }\n`;\n\nexport const TextInput = forwardRef(\n  (props: TextInputProps<HTMLInputElement>, ref: React.ForwardedRef<HTMLInputElement>) => {\n    return (\n      <input\n        type='text'\n        ref={ref}\n        id={props.id}\n        key={props.key}\n        className={props.className}\n        onClick={props.onClick ?? empty_event_handler}\n        onChange={props.onChange ?? empty_event_handler}\n        onInput={props.onInput ?? empty_event_handler}\n        onBlur={props.onBlur ?? empty_event_handler}\n        onFocus={props.onFocus ?? empty_event_handler}\n        onKeyPress={props.onKeyPress ?? empty_event_handler}\n        defaultValue={props.value ?? ''}\n        placeholder={props.placeholder ?? ' '}\n        css={css(props.css, styleTextInput)}\n      />\n    );\n  },\n);\n\nconst styleStretchTextInput = css`\n  width: 0;\n`;\n\nconst updateWidth = (element: HTMLInputElement) => {\n  const minWidth = element.style.minWidth;\n  element.style.width = '0';\n  element.style.minWidth = '0';\n  element.style.width = element.scrollWidth + 'px';\n  element.style.minWidth = minWidth;\n};\n\nexport const StretchTextInput = forwardRef(\n  (props: TextInputProps<HTMLInputElement>, ref: React.ForwardedRef<HTMLInputElement>) => {\n    const changeHandler = useCallback(\n      (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (props.onChange !== undefined) props.onChange(e);\n        updateWidth(e.currentTarget);\n      },\n      [props],\n    );\n    const inputRef = useRef<HTMLInputElement>(null);\n    if (typeof ref === 'function') ref(inputRef.current);\n    else if (ref !== null) ref.current = inputRef.current;\n    useEffect(() => {\n      if (inputRef.current !== null) updateWidth(inputRef.current);\n    }, [inputRef.current?.value]);\n    return <TextInput {...props} ref={inputRef} onChange={changeHandler} css={css(props.css, styleStretchTextInput)} />;\n  },\n);\n\nconst styleTextArea = css(\n  styleTextInput,\n  css`\n    resize: none;\n  `,\n);\n\nexport const TextArea = forwardRef(\n  (props: TextInputProps<HTMLTextAreaElement>, ref: React.ForwardedRef<HTMLTextAreaElement>) => {\n    return (\n      <textarea\n        ref={ref}\n        id={props.id}\n        key={props.key}\n        className={props.className}\n        onClick={props.onClick ?? empty_event_handler}\n        onChange={props.onChange ?? empty_event_handler}\n        onInput={props.onInput ?? empty_event_handler}\n        onBlur={props.onBlur ?? empty_event_handler}\n        onFocus={props.onFocus ?? empty_event_handler}\n        onKeyPress={props.onKeyPress ?? empty_event_handler}\n        placeholder={props.placeholder ?? ''}\n        css={styleTextArea}\n        defaultValue={props.value ?? ''}\n      />\n    );\n  },\n);\n\nconst styleStretchTextArea = css(\n  styleTextArea,\n  css`\n    min-height: 1em;\n  `,\n);\n\nconst updateHeight = (element: HTMLTextAreaElement) => {\n  element.style.height = '0px';\n  element.style.height = element.scrollHeight + 'px';\n};\n\nexport const StretchTextArea = forwardRef(\n  (props: TextInputProps<HTMLTextAreaElement>, ref: React.ForwardedRef<HTMLTextAreaElement>) => {\n    const changeHandler = useCallback(\n      (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n        if (props.onChange !== undefined) props.onChange(e);\n        updateHeight(e.currentTarget);\n      },\n      [props],\n    );\n    const inputRef = useRef<HTMLTextAreaElement>(null);\n    if (typeof ref === 'function') ref(inputRef.current);\n    else if (ref !== null) ref.current = inputRef.current;\n    useEffect(() => {\n      if (inputRef.current !== null) updateHeight(inputRef.current);\n    }, [inputRef.current?.value]);\n    return <TextArea {...props} ref={inputRef} onChange={changeHandler} css={styleStretchTextArea} />;\n  },\n);\n","import { AppContext, typeSelected } from './App';\nimport { StretchTextArea } from './TextInput';\nimport { css } from '@emotion/react';\nimport { mClaim } from 'models/mClaim';\nimport React, { useCallback, useContext, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from 'stores/index';\nimport { claim_selectors, claim_slice } from 'stores/slices/claim';\n\ntype Props = {\n  claimID: mClaim['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst stylePointClaim = css`\n  box-sizing: content-box;\n  width: 100%;\n  height: 1em;\n  border: none !important;\n  &:not(:only-child):not(:last-child):placeholder-shown {\n    background: #f6f6f6;\n  }\n`;\n\nexport const Claim: React.VFC<Props> = (props) => {\n  const dispatch = useDispatch();\n  const claim = useSelector((state: RootState) => claim_selectors.selectById(state, props.claimID));\n  const context = useContext(AppContext);\n  const focusRef = useRef<HTMLTextAreaElement>(null);\n  useEffect(() => {\n    if (context?.Refs.nextFocus.get !== props.claimID) return;\n    focusRef.current?.focus();\n    context?.Refs.nextFocus.set(undefined);\n  });\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.claimID);\n    },\n    [props.claimID, props.setSelected],\n  );\n  if (claim === undefined) return null;\n  return (\n    <StretchTextArea\n      ref={focusRef}\n      key={props.claimID}\n      className='pointClaim'\n      data-testid='claim'\n      data-modelid={props.claimID}\n      placeholder=' '\n      value={claim.contents}\n      onBlur={(e) => {\n        dispatch(\n          claim_slice.actions.upsertOne({\n            id: props.claimID,\n            contents: e.currentTarget.value,\n          }),\n        );\n      }}\n      onFocus={onFocus}\n      css={stylePointClaim}\n    />\n  );\n};\n","import { AppContext, typeSelected } from './App';\nimport { StretchTextInput, StretchTextArea } from './TextInput';\nimport { css } from '@emotion/react';\nimport { mEvidence } from 'models/mEvidence';\nimport React, { useCallback, useContext, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { RootState } from 'stores/index';\nimport { evidence_selectors, evidence_slice } from 'stores/slices/evidence';\n\ntype HeaderProps = {\n  focusRef: React.RefObject<HTMLInputElement>;\n  parentID: mEvidence['id'];\n  metadata: Omit<mEvidence, 'content'>;\n};\n\nconst styleEvidenceHeadContent = css`\n  display: inline-block;\n  min-width: 2em;\n  width: 1em;\n  height: 1em;\n  flex-grow: 0;\n  flex-shrink: 0;\n  &:not(:placeholder-shown):not(:focus) {\n    padding-right: 0;\n    padding-left: 0;\n    border: none;\n  }\n`;\n\nconst styleEvidenceHeader = css`\n  border-bottom: solid 1px black;\n  & > *:not(:last-child)::after {\n    content: ',';\n    display: inline;\n    padding: 0 0.2em;\n  }\n`;\n\nconst EvidenceHeader: React.VFC<HeaderProps> = (props) => {\n  const dispatch = useDispatch();\n  return (\n    <div className='evidenceHeader' css={styleEvidenceHeader}>\n      <span className='evidenceAbout'>\n        <StretchTextInput\n          key={`${props.parentID}_about`}\n          ref={props.focusRef}\n          value={props.metadata.about_author ?? ''}\n          onBlur={(e) => {\n            dispatch(\n              evidence_slice.actions.upsertOne({\n                id: props.parentID,\n                about_author: e.currentTarget.value,\n              }),\n            );\n          }}\n          css={styleEvidenceHeadContent}\n        />\n      </span>\n      <span className='evidenceAuthor'>\n        <StretchTextInput\n          key={`${props.parentID}_author`}\n          className='evidenceAuthor'\n          value={props.metadata.author ?? ''}\n          onBlur={(e) => {\n            dispatch(\n              evidence_slice.actions.upsertOne({\n                id: props.parentID,\n                author: e.currentTarget.value,\n              }),\n            );\n          }}\n          css={styleEvidenceHeadContent}\n        />\n      </span>\n      <span className='evidenceYear'>\n        <StretchTextInput\n          key={`${props.parentID}_year`}\n          className='evidenceYear'\n          value={props.metadata.year?.toString() ?? ''}\n          onBlur={(e) => {\n            dispatch(\n              evidence_slice.actions.upsertOne({\n                id: props.parentID,\n                year: e.currentTarget.value,\n              }),\n            );\n          }}\n          css={styleEvidenceHeadContent}\n        />\n      </span>\n    </div>\n  );\n};\n\ntype Props = {\n  eviID: mEvidence['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst styleEvidence = css`\n  width: 100%;\n`;\n\nconst styleEvidenceContent = css`\n  box-sizing: border-box;\n  overflow: hidden;\n  width: 100%;\n  border: none !important;\n  border-left: solid 1px black !important;\n  border-bottom: solid 1px black !important;\n  padding-left: 0.5em;\n  padding-bottom: 0.5em;\n  margin-top: 0.5em;\n`;\n\nexport const Evidence: React.VFC<Props> = (props) => {\n  const dispatch = useDispatch();\n  const evidence = useSelector((state: RootState) => evidence_selectors.selectById(state, props.eviID));\n  const context = useContext(AppContext);\n  const focusRef = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    if (context?.Refs.nextFocus.get !== props.eviID) return;\n    focusRef.current?.focus();\n    context?.Refs.nextFocus.set(undefined);\n  });\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.eviID);\n    },\n    [props.eviID, props.setSelected],\n  );\n  if (evidence === undefined) return null;\n  return (\n    <div className='evidence' data-testid='evidence' data-modelid={props.eviID} onFocus={onFocus} css={styleEvidence}>\n      <EvidenceHeader focusRef={focusRef} parentID={props.eviID} metadata={evidence} />\n      <StretchTextArea\n        key={props.eviID}\n        className='evidenceContent'\n        value={evidence.contents}\n        onBlur={(e) => {\n          dispatch(\n            evidence_slice.actions.upsertOne({\n              id: props.eviID,\n              contents: e.currentTarget.value,\n            }),\n          );\n        }}\n        css={styleEvidenceContent}\n      />\n    </div>\n  );\n};\n","import LeaderLine from 'leader-line-new';\r\n\r\nconst defaultOptions: LeaderLine.Options = {\r\n  color: '#999',\r\n  size: 2,\r\n  path: 'straight',\r\n  startPlug: 'behind',\r\n  endPlug: 'behind',\r\n};\r\n\r\nexport const createLeaderLine = (\r\n  start: Element | LeaderLine.AnchorAttachment,\r\n  end: Element | LeaderLine.AnchorAttachment,\r\n  options?: LeaderLine.Options | undefined,\r\n): LeaderLine => {\r\n  return new LeaderLine(start, end, {\r\n    ...defaultOptions,\r\n    ...options,\r\n  });\r\n};\r\n","import { toast as nativeToast, ToastContentProps } from 'react-toastify';\r\n\r\ninterface ToastContentData {\r\n  title: string;\r\n  description: string | undefined;\r\n}\r\nconst ToastContent = (props: ToastContentProps<ToastContentData>) => (\r\n  <div>\r\n    <div className='title'>{props.data?.title}</div>\r\n    {props.data?.description ? <div className='description'>{props.data?.description}</div> : null}\r\n  </div>\r\n);\r\n\r\nexport const toast = (title: string, description: string | undefined) => {\r\n  nativeToast(ToastContent, {\r\n    data: {\r\n      title: title,\r\n      description: description,\r\n    },\r\n  });\r\n};\r\n\r\nexport const toastAndLog = (\r\n  title: string,\r\n  description: string | undefined,\r\n  log_msg: string | undefined = undefined,\r\n) => {\r\n  toast(title, description);\r\n  if (log_msg === undefined) log_msg = description;\r\n  console.log(`Toasted - ${title}: ${log_msg}`);\r\n};\r\n","import { useRef } from 'react';\n\nexport const InvalidSymbol = Symbol();\nexport const usePreviousValue = <T>(value: T, doUpdate: boolean = true): T | typeof InvalidSymbol => {\n  const ref = useRef<T | typeof InvalidSymbol>(InvalidSymbol); // Tがundefinedの場合もあるため、初期化はunique symbol\n  const prevValue = ref.current;\n  if (doUpdate || prevValue === InvalidSymbol) ref.current = value;\n  return prevValue;\n};\n\nexport const useCheckDepsUpdate = <D extends any[]>(deps: D): boolean => {\n  const prevDeps = usePreviousValue([...deps]);\n  if (prevDeps === InvalidSymbol) return true; // 初回は必ず更新されている\n  return deps.some((v, i) => !Object.is(v, prevDeps[i]));\n};\n\nexport const useDependentObj = <T, D extends any[]>(obj: T, deps: D): T => {\n  const is_deps_changed = useCheckDepsUpdate(deps);\n  const prev_obj = usePreviousValue(obj, is_deps_changed);\n  return is_deps_changed || prev_obj === InvalidSymbol ? obj : prev_obj;\n};\n","import { AppContext, typeSelected } from './App';\nimport { Claim } from './Claim';\nimport { Evidence } from './Evidence';\nimport { StretchTextInput, StretchTextArea } from './TextInput';\nimport { css } from '@emotion/react';\nimport { id_is_mClaim } from 'models/mClaim';\nimport { id_is_mEvidence } from 'models/mEvidence';\nimport { id_is_mPoint, mPoint } from 'models/mPoint';\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createLeaderLine } from 'services/line';\nimport { set_rebut } from 'services/point';\nimport { toastAndLog } from 'services/toast';\nimport { RootState } from 'stores/index';\nimport { point_selectors, point_slice } from 'stores/slices/point';\nimport { useCheckDepsUpdate, useDependentObj } from 'util/hooks';\n\ntype Props = {\n  pointID: mPoint['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\ntype ChildProps = {\n  parentID: mPoint['id'];\n  contents: mPoint['contents'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst stylePointClaim = css`\n  box-sizing: content-box;\n  width: 100%;\n  height: 1em;\n  border: none !important;\n`;\n\nconst PointChild: React.VFC<ChildProps> = (props) => {\n  return (\n    <>\n      {props.contents?.map((id) => {\n        if (id_is_mEvidence(id)) return <Evidence eviID={id} setSelected={props.setSelected} />;\n        if (id_is_mClaim(id)) return <Claim claimID={id} setSelected={props.setSelected} />;\n        if (id_is_mPoint(id)) return <Point pointID={id} setSelected={props.setSelected} />;\n        return null;\n      })}\n    </>\n  );\n};\n\nconst stylePointNumberingWrap = css`\n  display: inline-block;\n  min-width: 1.2em;\n  height: 1em;\n  flex-grow: 0;\n  flex-shrink: 0;\n  &::after {\n    content: '.';\n    display: inline;\n  }\n`;\n\nconst stylePointNumbering = css`\n  min-width: 1em;\n  width: 1em;\n  height: 1em;\n  &:not(:placeholder-shown):not(:focus) {\n    padding-right: 0;\n    padding-left: 0;\n    border: none;\n  }\n`;\n\nconst stylePointChildrenWrap = css`\n  min-width: 0;\n  width: 100%;\n`;\n\nconst stylePoint = css`\n  width: 100%;\n  display: flex;\n  column-gap: 0;\n`;\n\nexport const Point: React.VFC<Props> = (props) => {\n  const dispatch = useDispatch();\n  const point = useSelector((state: RootState) => point_selectors.selectById(state, props.pointID));\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.pointID);\n    },\n    [props.pointID, props.setSelected],\n  );\n  const context = useContext(AppContext);\n  const onClick = context?.Callbacks.Point?.onClick;\n  const idToPointRef = context?.Refs.idToPointRef;\n  const thisRef = useRef<HTMLDivElement>(null);\n  const focusRef = useRef<HTMLInputElement>(null);\n  useEffect(() => {\n    if (context?.Refs.nextFocus.get !== props.pointID) return;\n    focusRef.current?.focus();\n    context?.Refs.nextFocus.set(undefined);\n  });\n  if (useCheckDepsUpdate([props.pointID, thisRef])) idToPointRef?.add({ [props.pointID]: thisRef });\n  const [rebuttalLine, setRebuttalLine] = useState<LeaderLine | undefined>(undefined);\n  useEffect(() => {\n    if (idToPointRef) {\n      if (rebuttalLine !== undefined) {\n        rebuttalLine.remove();\n        setRebuttalLine(undefined);\n      }\n      if (point?.rebut_to !== undefined) {\n        try {\n          const rebut_to = idToPointRef.get[point.rebut_to]?.current;\n          if (rebut_to && thisRef.current) setRebuttalLine(createLeaderLine(rebut_to, thisRef.current));\n        } catch (e) {\n          set_rebut(props.pointID, undefined);\n          toastAndLog('リンク線の表示に失敗', '反駁先が正しくありません');\n        }\n      }\n    }\n  }, [point?.rebut_to, setRebuttalLine, idToPointRef, idToPointRef?.get]);\n  if (point === undefined) return null;\n  return (\n    <div\n      ref={thisRef}\n      className='point'\n      data-testid='point'\n      data-modelid={props.pointID}\n      onFocus={onFocus}\n      onClick={onClick}\n      css={stylePoint}\n    >\n      <div className='pointNumberingWrap' css={stylePointNumberingWrap}>\n        <StretchTextInput\n          ref={focusRef}\n          key={props.pointID}\n          className='pointNumbering'\n          data-testid='pointNumbering'\n          value={point.numbering?.toString()}\n          onBlur={(e) => {\n            dispatch(\n              point_slice.actions.upsertOne({\n                id: props.pointID,\n                numbering: e.currentTarget.value,\n              }),\n            );\n          }}\n          css={stylePointNumbering}\n        />\n      </div>\n      <div className='pointChildrenWrap' data-testid='pointChildrenWrap' css={stylePointChildrenWrap}>\n        {point.contents !== undefined ? (\n          <PointChild parentID={props.pointID} contents={point.contents} setSelected={props.setSelected} />\n        ) : null}\n      </div>\n    </div>\n  );\n};\n","import { typeSelected } from './App';\nimport { Point } from './Point';\nimport { css } from '@emotion/react';\nimport { mPart } from 'models/mPart';\nimport React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'stores/index';\nimport { part_selectors } from 'stores/slices/part';\n\ntype Props = {\n  partID: mPart['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst stylePartName = css`\n  border-bottom: solid 1px black;\n  padding: 0.5em;\n  font-weight: bold;\n`;\nconst stylePartChildrenWrap = css`\n  padding: 6px;\n  padding-top: 0.5em;\n`;\nconst stylePart = css`\n  border: solid 1px black;\n`;\n\nexport const Part: React.VFC<Props> = (props) => {\n  const part = useSelector((state: RootState) => part_selectors.selectById(state, props.partID));\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.partID);\n    },\n    [props.partID, props.setSelected],\n  );\n  if (part === undefined) return null;\n  return (\n    <div className='part' data-testid='part' data-modelid={props.partID} onFocus={onFocus} css={stylePart} tabIndex={0}>\n      <div className='partName' css={stylePartName}>\n        {part.name ?? ''}\n      </div>\n      <div className='partChildrenWrap' css={stylePartChildrenWrap}>\n        {part.contents?.map((content) => <Point pointID={content} setSelected={props.setSelected} />) ?? null}\n      </div>\n    </div>\n  );\n};\n","import { typeSelected } from './App';\nimport { Part } from './Part';\nimport { css } from '@emotion/react';\nimport { mSide } from 'models/mSide';\nimport React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'stores/index';\nimport { side_selectors } from 'stores/slices/side';\n\ntype Props = {\n  sideID: mSide['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst styleSide = css``;\nconst styleSideName = css``;\nconst styleSideChildrenWrap = css`\n  width: 100%;\n  min-height: 20em;\n  display: flex;\n  gap: 1em;\n  justify-content: space-between;\n  & > * {\n    width: 100%; /* 子要素を強制的に均等幅にする */\n  }\n`;\n\nexport const Side: React.VFC<Props> = (props) => {\n  const side = useSelector((state: RootState) => side_selectors.selectById(state, props.sideID));\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.sideID);\n    },\n    [props.sideID, props.setSelected],\n  );\n  if (side === undefined) return null;\n  return (\n    <div className='side' data-testid='side' data-modelid={props.sideID} onFocus={onFocus} css={styleSide}>\n      <div className='sideName' css={styleSideName}>\n        {side.side}\n      </div>\n      <div className='sideChildrenWrap' css={styleSideChildrenWrap}>\n        {side.contents?.map((content) => <Part partID={content} setSelected={props.setSelected} />) ?? null}\n      </div>\n    </div>\n  );\n};\n","import { typeSelected } from './App';\nimport { Side } from './Side';\nimport { css } from '@emotion/react';\nimport { mMatch } from 'models/mMatch';\nimport React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from 'stores/index';\nimport { match_selectors } from 'stores/slices/match';\n\ntype HeaderProps = {\n  metadata: Omit<mMatch, 'content'>;\n};\n\nconst styleMatchHeader = css`\n  width: 100%;\n  padding: 0.5em;\n  border: solid 1px black;\n  & > span {\n    margin: 0 0.5em;\n    &:first-of-type {\n      margin-left: 0;\n    }\n    &:empty {\n      margin: 0;\n    }\n  }\n`;\n\nconst MatchHeader: React.VFC<HeaderProps> = (props) => (\n  <div className='matchHeader' data-testid='matchHeader' css={styleMatchHeader}>\n    <span className='matchTopic'>{props.metadata.topic}</span>\n    <span className='matchDate'>{props.metadata.date}</span>\n  </div>\n);\n\ntype Props = {\n  matchID: mMatch['id'];\n  setSelected: (_: typeSelected) => void;\n};\n\nconst styleMatch = css`\n  &,\n  & * {\n    box-sizing: border-box;\n  }\n`;\n\nexport const Match: React.VFC<Props> = (props) => {\n  const onFocus = useCallback(\n    (e: React.FocusEvent) => {\n      e.preventDefault();\n      e.stopPropagation();\n      props.setSelected(props.matchID);\n    },\n    [props.matchID, props.setSelected],\n  );\n  const match = useSelector((state: RootState) => match_selectors.selectById(state, props.matchID));\n  if (match === undefined) return null;\n  return (\n    <div className='match' data-testid='match' data-modelid={props.matchID} onFocus={onFocus} css={styleMatch}>\n      <MatchHeader metadata={match} />\n      {match.contents?.map((side) => <Side sideID={side} setSelected={props.setSelected} />) ?? null}\n    </div>\n  );\n};\n","import { css } from '@emotion/react';\r\nimport React from 'react';\r\n\r\nconst menuVertivalPadding = '10px';\r\n\r\ntype MenuItemCallback = () => void;\r\ninterface MenuItemProps {\r\n  label: string;\r\n  onClick: MenuItemCallback;\r\n}\r\nconst menuItemStyle = css`\r\n  padding: 0.25em 0.5em;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  &:hover {\r\n    background-color: #ccc;\r\n  }\r\n`;\r\n\r\nexport const MenuItem: React.FC<MenuItemProps> = (props) => (\r\n  <li className='menuItem' onClick={props.onClick} css={menuItemStyle} aria-label={props.label}>\r\n    {props.label}\r\n  </li>\r\n);\r\n\r\ninterface MenuItemListProps {\r\n  items: MenuItemProps[];\r\n}\r\nconst menuItemListStyle = css`\r\n  position: absolute;\r\n  left: 0;\r\n  top: calc(1em + ${menuVertivalPadding} * 2);\r\n  width: 15em;\r\n  padding: 0;\r\n  background-color: #e6e6e6;\r\n  box-shadow: 0 0 1em 5px rgba(0, 0, 0, 0.2);\r\n  list-style-type: none;\r\n`;\r\nexport const MenuItemList: React.FC<MenuItemListProps> = (props) => {\r\n  return (\r\n    <ul className='menuItemList' css={menuItemListStyle}>\r\n      {props.items.map((v) => (\r\n        <MenuItem label={v.label} onClick={v.onClick} key={v.label} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\ninterface MenuBarProps {\r\n  items: {\r\n    label: string;\r\n    items: MenuItemListProps['items'];\r\n  }[];\r\n}\r\nconst menuBarStyle = css`\r\n  position: sticky;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  height: calc(1em + ${menuVertivalPadding} * 2);\r\n  margin: 0;\r\n  padding: ${menuVertivalPadding} 0;\r\n  background-color: #e6e6e6;\r\n  box-shadow: 0 0 1em 5px rgba(0, 0, 0, 0.2);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  list-style-type: none;\r\n`;\r\nconst menuStyle = css`\r\n  position: relative;\r\n  padding: ${menuVertivalPadding} 0;\r\n  & > ul {\r\n    visibility: hidden;\r\n  }\r\n  &:hover > ul,\r\n  & > ul.open {\r\n    visibility: visible;\r\n  }\r\n`;\r\nconst menuTextStyle = css`\r\n  padding: ${menuVertivalPadding} 1em;\r\n`;\r\nconst onMenuClick = (e: React.MouseEvent) => {\r\n  const items = e.currentTarget.parentNode?.querySelector('ul');\r\n  if (!items) {\r\n    console.error('No child MenuItemList found');\r\n    return;\r\n  }\r\n  items.classList.toggle('open');\r\n};\r\nexport const MenuBar: React.FC<MenuBarProps> = (props) => {\r\n  return (\r\n    <ul className='menuBar' css={menuBarStyle}>\r\n      {props.items.map((v) => (\r\n        <li className='menu' key={v.label} css={menuStyle}>\r\n          <span css={menuTextStyle} onClick={onMenuClick}>\r\n            {v.label}\r\n          </span>\r\n          <MenuItemList items={v.items} />\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddClaim(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,144c0-17.7,14.3-32,32-32h384c17.7,0,32,14.3,32,32s-14.3,32-32,32H32C14.3,176,0,161.7,0,144z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,304c0-17.7,14.3-32,32-32h216.3c17.8,0,32,14.3,32,32s-14.3,32-32,32H32C14.3,336,0,321.7,0,304z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddClaim);\nexport default __webpack_public_path__ + \"static/media/AddClaim.46a2871c.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3, _path4;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddEvidence(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M102.3,128.4c0-17.7,14.3-32,32-32H416c17.7,0,32,14.3,32,32s-14.3,32-32,32H134.3C116.6,160.4,102.3,146.1,102.3,128.4z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M102.3,256.4c0-17.7,14.3-32,32-32h211.3c17.8,0,32,14.3,32,32s-14.3,32-32,32H134.3C116.6,288.4,102.3,274.1,102.3,256.4z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16,64.4c8.9,0,16,7.1,16,16V352c0,8.9-7.1,16-16,16s-16-7.1-16-16V80.4C0,71.5,7.1,64.4,16,64.4z\"\n  })), _path4 || (_path4 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M448,352c0,8.9-7.1,16-16,16H16c-8.9,0-16-7.1-16-16s7.1-16,16-16h416C440.9,336,448,343.2,448,352z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddEvidence);\nexport default __webpack_public_path__ + \"static/media/AddEvidence.d39e2ea4.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _circle, _path2, _circle2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddPoint(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M96,304c0-17.7,14.3-32,32-32h288c17.8,0,32,14.3,32,32s-14.3,32-32,32H128C110.3,336,96,321.7,96,304z\"\n  })), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 32,\n    cy: 304,\n    r: 32\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M96,144c0-17.7,14.3-32,32-32h288c17.8,0,32,14.3,32,32s-14.3,32-32,32H128C110.3,176,96,161.7,96,144z\"\n  })), _circle2 || (_circle2 = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 32,\n    cy: 144,\n    r: 32\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddPoint);\nexport default __webpack_public_path__ + \"static/media/AddPoint.86ade359.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddPointChild(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M96,304c0-17.7,14.3-32,32-32h288c17.8,0,32,14.3,32,32s-14.3,32-32,32H128C110.3,336,96,321.7,96,304z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0,144c0-17.7,14.3-32,32-32h384c17.8,0,32,14.3,32,32s-14.3,32-32,32H32C14.3,176,0,161.7,0,144z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M42,207.9c8.9,0,16,7.1,16,16v105.7c0,8.9-7.1,16-16,16s-16-7.1-16-16V223.9C26,215,33.1,207.9,42,207.9z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddPointChild);\nexport default __webpack_public_path__ + \"static/media/AddPointChild.2c9623d2.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddPointParent(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M128,118h288c17.7,0,32,14.3,32,32s-14.2,32-32,32H128c-17.7,0-32-14.3-32-32S110.3,118,128,118z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M32,278h384c17.7,0,32,14.3,32,32c0,17.7-14.2,32-32,32H32c-17.7,0-32-14.3-32-32C0,292.3,14.3,278,32,278z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M26,230.1V124.4c0-8.9,7.1-16,16-16s16,7.1,16,16v105.7c0,8.9-7.1,16-16,16S26,239,26,230.1z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddPointParent);\nexport default __webpack_public_path__ + \"static/media/AddPointParent.cbac721e.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2, _path3;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgAddPointToPart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M25.3,176.5c21.7,0.3,30.6,10.4,30.6,31.8c0,0.6,0,0.9,0,1.2c-0.6,41-1.2,63-1.2,77.9c0,2.4,0.9,5.4,5.1,5.6 c11-0.3,16.9,6.8,16.9,14.6c0,7.4-5.4,14.9-16.4,14.9c-0.3,0-0.3,0-0.6,0c-6.2-0.3-16.6-0.3-25.9-0.3c-7.1,0-13.4,0-16.9,0.3 C4.2,323.1,0,314.4,0,307.9c0-7.4,5.4-14.9,15.8-14.9c0.3,0,0.9,0,1.2,0c1.2,0,2.4,0,3.6,0c3.9,0,5.1-0.9,5.1-6.2 c0.3-13.7,0.6-31.8,0.6-52.3c0-4.8,0-9.8,0-14.9c0-8.3-0.9-11.6-8.3-11.6c-0.6,0-1.5,0-2.1,0c-0.3,0-0.6,0-0.9,0 c-9.2,0-13.7-7.4-13.7-15.2c0-8,4.8-16.4,14.6-16.4h9.4V176.5z M14.3,116.4c0-14.6,12.5-20.2,20.8-20.2c10.7,0,20.8,8.9,20.8,20.2 c0,10.7-8,21.1-20.8,21.1C23.5,137.6,14.3,130.1,14.3,116.4z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M252,322.2c-5.9-0.3-15.5-0.3-24.4-0.3c-6.2,0-12.2,0-15.8,0.3c-16.1,0.9-16.1-12.8-16.1-13.7c0-7.1,5.1-14.3,14.9-14.3 c0.3,0,0.9,0,1.2,0s0.6,0,0.9,0c3,0,4.5-1.2,4.5-4.5c0-9.2,0.3-19.6,0.3-29.1c0-14-0.3-26.2-0.6-31.2c-1.2-20.2-14-28.5-27.6-28.5 c-17.2,0-36.3,13.1-37.2,31.8c-0.3,5.4-0.3,13.4-0.3,23.2s0,21.7,0.3,35.1c0,3.3,2.1,3.3,5.1,3.3c13.1-0.6,16.4,8.3,16.4,13.7 c0,7.1-5.4,14.3-15.8,14.3c-0.3,0-0.3,0-0.6,0c-5.9-0.3-15.5-0.3-24.4-0.3c-6.2,0-12.2,0-15.8,0.3c-16.1,0.9-16.1-12.8-16.1-13.7 c0-7.1,5.1-14.3,14.9-14.3c0.3,0,0.9,0,1.2,0c0.6,0,0.9,0,1.5,0c2.7,0,3.6-0.9,3.6-4.2c0.6-30.3,0.9-35.4,0.9-46.7 c0-6.2,0-14-0.3-28.5c0-3.6-2.4-7.4-7.1-7.4c-0.3,0-0.3,0-0.6,0s-0.6,0-1.2,0c-8.9,0-13.4-7.1-13.4-14.9s4.8-15.5,14.6-15.5 c3.6,0,4.2-0.3,7.1-0.3c0.6,0,1.2,0,1.8,0c12.2,0,22,3,26.8,10.7c0.3,0.6,0.6,0.9,1.2,0.9c0.6,0,1.5-0.9,3-2.1 c9.5-7.4,24.7-12.5,40.1-12.5c25.3,0,51.1,13.4,52.3,51.1c0.3,11.9,0.9,42.8,0.9,65.1c0,3.3,2.1,4.2,3.9,4.2 c11,0,16.6,7.1,16.6,14.3c0,6.8-5.4,13.7-16.1,13.7C252.6,322.2,252.3,322.2,252,322.2z\"\n  })), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M431.4,322.2c-5.9-0.3-15.5-0.3-24.4-0.3c-6.2,0-12.2,0-15.8,0.3c-16.1,0.9-16.1-12.8-16.1-13.7c0-7.1,5.1-14.3,14.9-14.3 c0.3,0,0.9,0,1.2,0c0.3,0,0.6,0,1.2,0c3,0,4.2-1.2,4.2-4.5c0-9.2,0.3-19.6,0.3-29.1c0-14-0.3-26.2-0.6-31.2 c-1.2-20.2-14-28.5-27.6-28.5c-17.2,0-36.3,13.1-37.2,31.8c-0.3,5.4-0.3,13.4-0.3,23.2s0,21.7,0.3,35.1c0,3.3,2.1,3.3,5.1,3.3 c13.1-0.6,16.4,8.3,16.4,13.7c0,7.1-5.4,14.3-15.8,14.3c-0.3,0-0.3,0-0.6,0c-5.9-0.3-15.5-0.3-24.4-0.3c-6.2,0-12.2,0-15.8,0.3 c-16.1,0.9-16.1-12.8-16.1-13.7c0-7.1,5.1-14.3,14.9-14.3c0.3,0,0.9,0,1.2,0c0.6,0,0.9,0,1.5,0c2.7,0,3.6-0.9,3.6-4.2 c0.6-30.3,0.9-68.4,0.9-102.9c0-18.4,0-35.7-0.3-50.2c0-5.4-1.8-7.7-8-7.7c-4.8,0-16.6-0.3-16.6-15.5c0-7.7,4.5-15.5,13.7-15.5 c0.3,0,0.6,0,0.9,0c3.6,0.3,6.5,0.3,9.5,0.3c16.4,0.3,30.9,7.4,31.2,25.3c0,6.8,0.3,13.4,0.3,19.3c0,19.3-0.6,34.5-0.9,42.2 c0,1.2,0,1.8,0.6,1.8c0.3,0,0.6-0.3,1.5-0.9c9.5-7.4,24.7-12.5,40.1-12.5c25.3,0,51.1,13.4,52.3,51.1c0.3,11.9,0.9,42.8,0.9,65.1 c0,3.3,2.1,4.2,3.9,4.2c11,0,16.6,7.1,16.6,14.3c0,6.8-5.4,13.7-16.1,13.7C431.9,322.2,431.6,322.2,431.4,322.2z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgAddPointToPart);\nexport default __webpack_public_path__ + \"static/media/AddPointToPart.7db428d9.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _g, _g2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDrawLine(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"\\\\u30EC\\\\u30A4\\\\u30E4\\\\u30FC_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 448 448\",\n    style: {\n      enableBackground: \"new 0 0 448 448\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M94.6,332.1L333.4,93.3c6.3-6.3,16.3-6.3,22.6,0s6.3,16.3,0,22.6L117.2,354.7c-6.3,6.3-16.3,6.3-22.6,0 S88.3,338.4,94.6,332.1z\"\n  })), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M64,344c22.1,0,40,17.9,40,40s-17.9,40-40,40s-40-17.9-40-40S41.9,344,64,344 M64,320c-35.3,0-64,28.7-64,64s28.7,64,64,64 s64-28.7,64-64S99.3,320,64,320L64,320z\"\n  }))), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M384,24c22.1,0,40,17.9,40,40s-17.9,40-40,40s-40-17.9-40-40S361.9,24,384,24 M384,0c-35.3,0-64,28.7-64,64s28.7,64,64,64 s64-28.7,64-64S419.3,0,384,0L384,0z\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDrawLine);\nexport default __webpack_public_path__ + \"static/media/DrawLine.7b536099.svg\";\nexport { ForwardRef as ReactComponent };","import { ReactComponent as AddClaimSVG } from './images/AddClaim.svg';\r\nimport { ReactComponent as AddEvidenceSVG } from './images/AddEvidence.svg';\r\nimport { ReactComponent as AddPointSVG } from './images/AddPoint.svg';\r\nimport { ReactComponent as AddPointChildSVG } from './images/AddPointChild.svg';\r\nimport { ReactComponent as AddPointParentSVG } from './images/AddPointParent.svg';\r\nimport { ReactComponent as AddPointToPartSVG } from './images/AddPointToPart.svg';\r\nimport { ReactComponent as DrawLineSVG } from './images/DrawLine.svg';\r\nimport { css } from '@emotion/react';\r\nimport { SyntheticEvent, useCallback, useState } from 'react';\r\nimport { FaAngleDown, FaAngleUp } from 'react-icons/fa';\r\n\r\ntype ToolBarProps = {\r\n  operations: {\r\n    add_claim: (e?: Event | SyntheticEvent) => void;\r\n    add_evidence: (e?: Event | SyntheticEvent) => void;\r\n    add_point: (e?: Event | SyntheticEvent) => void;\r\n    add_point_child: (e?: Event | SyntheticEvent) => void;\r\n    add_point_to_parent: (e?: Event | SyntheticEvent) => void;\r\n    add_point_to_part: (e?: Event | SyntheticEvent) => void;\r\n    draw_line: (e?: Event | SyntheticEvent) => void;\r\n  };\r\n};\r\n\r\nconst wrapStyle = css`\r\n  position: fixed;\r\n  width: 5em;\r\n  right: 2em;\r\n  bottom: 1em;\r\n  padding: 1em;\r\n  display: flex;\r\n  justify-content: center;\r\n  padding-top: 2em;\r\n  border-radius: 0.5em;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\r\n  background-color: white;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst topBarStyle = css`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 1em;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  color: #3f3f3f;\r\n  background-color: #dfdfdf;\r\n  &:hover {\r\n    background-color: #ccc;\r\n  }\r\n`;\r\n\r\nconst buttonsWrapStyle = css`\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5em;\r\n`;\r\n\r\nconst buttonStyle = css`\r\n  width: 3em;\r\n  height: 3em;\r\n  padding: 0.5em;\r\n  border-radius: 0.5em;\r\n  color: #3f3f3f;\r\n  background-color: white;\r\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);\r\n  &:hover {\r\n    background-color: lightgray;\r\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);\r\n  }\r\n`;\r\n\r\nexport const useToolBar = (): [(_: ToolBarProps) => JSX.Element, boolean, () => void] => {\r\n  const [isToolBarOpen, setIsToolBarOpen] = useState(true);\r\n  const toggleToolBar = useCallback(() => setIsToolBarOpen(!isToolBarOpen), [isToolBarOpen]);\r\n  return [\r\n    ({ operations }: ToolBarProps) => (\r\n      <div className='ToolbarWrap' css={wrapStyle}>\r\n        <div css={topBarStyle} onClick={toggleToolBar}>\r\n          {isToolBarOpen ? <FaAngleDown /> : <FaAngleUp />}\r\n        </div>\r\n        {isToolBarOpen ? (\r\n          <div css={buttonsWrapStyle}>\r\n            <AddClaimSVG onClick={operations.add_claim} css={buttonStyle} />\r\n            <AddEvidenceSVG onClick={operations.add_evidence} css={buttonStyle} />\r\n            <AddPointSVG onClick={operations.add_point} css={buttonStyle} />\r\n            <AddPointChildSVG onClick={operations.add_point_child} css={buttonStyle} />\r\n            <AddPointParentSVG onClick={operations.add_point_to_parent} css={buttonStyle} />\r\n            <AddPointToPartSVG onClick={operations.add_point_to_part} css={buttonStyle} />\r\n            <DrawLineSVG onClick={operations.draw_line} css={buttonStyle} />\r\n          </div>\r\n        ) : (\r\n          <span>Tools</span>\r\n        )}\r\n      </div>\r\n    ),\r\n    isToolBarOpen,\r\n    toggleToolBar,\r\n  ];\r\n};\r\n","import { css } from '@emotion/react';\r\nimport Cookies from 'js-cookie';\r\nimport React, { useCallback, useEffect } from 'react';\r\nimport { useModal } from 'react-hooks-use-modal';\r\nimport { FaTimes } from 'react-icons/fa';\r\nimport YouTube from 'react-youtube';\r\n\r\nconst wrapStyle = css`\r\n  position: relative;\r\n  width: 70vw;\r\n  height: 70vh;\r\n  max-width: 1000px;\r\n  padding: 24px 40px 16px;\r\n  border-radius: 8px;\r\n  background-color: white;\r\n  & > div:not(:first-of-type) {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  & iframe {\r\n    width: 90%;\r\n    height: 90%;\r\n  }\r\n`;\r\nconst closeStyle = css`\r\n  display: inline-block;\r\n  position: absolute;\r\n  width: 32px;\r\n  right: 8px;\r\n  top: 8px;\r\n  cursor: pointer;\r\n  color: #000;\r\n  &:hover {\r\n    color: #333;\r\n  }\r\n`;\r\n\r\nexport type useTutorialModal = () => [React.VFC<{}>, () => void, () => void, boolean];\r\nexport const useTutorialModal: useTutorialModal = () => {\r\n  const [Modal, open, close, isModalOpen] = useModal('root', {\r\n    preventScroll: true,\r\n  });\r\n  const videoOptions = {\r\n    playerVars: {\r\n      autoplay: 1,\r\n      controls: 0,\r\n      rel: 0,\r\n      showinfo: 0,\r\n      mute: 1,\r\n      loop: 0,\r\n    },\r\n  };\r\n  useEffect(() => {\r\n    if (!Cookies.get('dontShowTutorial')) open();\r\n    Cookies.set('dontShowTutorial', 'true');\r\n  }, []);\r\n  return [\r\n    useCallback(\r\n      () => (\r\n        <Modal>\r\n          <div id='help-wrap' css={wrapStyle}>\r\n            <div css={closeStyle} onClick={close}>\r\n              <FaTimes title='Close the help modal' size={32} />\r\n            </div>\r\n            <YouTube videoId='Xe7SfJouB7M' onEnd={() => setTimeout(close, 3000)} opts={videoOptions} />\r\n          </div>\r\n        </Modal>\r\n      ),\r\n      [Modal, close],\r\n    ),\r\n    open,\r\n    close,\r\n    isModalOpen,\r\n  ];\r\n};\r\n","import { saveAs } from 'file-saver';\n\nexport const saveText = (content: string, filename: string, mimetype: string): void => {\n  const blob = new Blob([content], { type: mimetype });\n  saveAs(blob, filename);\n};\n\nexport const saveXML = (content: string, filename: string): void =>\n  saveText(content, filename, 'application/xml;charset=utf-8');\n","import { encodeMatch } from './match';\nimport { saveXML } from './textfileSaver';\nimport { mMatch } from 'models/mMatch';\nimport { create } from 'xmlbuilder2';\n\nexport const encode = (matchId: mMatch['id']) => {\n  const xml = create({\n    root: encodeMatch(matchId),\n  });\n  return xml.end({ prettyPrint: true });\n};\nexport const saveMatch = (matchId: mMatch['id'], fileName: string | undefined) => {\n  saveXML(encode(matchId), fileName ?? 'flowsheet.dflow');\n};\n","import { ErrorBoundary } from './ErrorBoundary';\nimport { useHelpModal } from './HelpModal';\nimport { useLoadFileModal } from './LoadFileModal';\nimport { Match } from './Match';\nimport { MenuBar } from './MenuBar';\nimport { Point } from './Point';\nimport { useToolBar } from './ToolBar';\nimport { useTutorialModal } from './TutorialModal';\nimport { css } from '@emotion/react';\nimport LeaderLine from 'leader-line-new';\nimport { ID_TYPE } from 'models';\nimport { baseModel } from 'models/baseModel';\nimport { mEvidenceSignature } from 'models/mEvidence';\nimport { mMatch } from 'models/mMatch';\nimport { id_is_mPoint, id_is_PointChild, mPoint } from 'models/mPoint';\nimport React, { useState, useLayoutEffect, useCallback, useContext, createContext, useRef, useEffect } from 'react';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { Provider } from 'react-redux';\nimport { ToastContainer } from 'react-toastify';\nimport { saveMatch } from 'repositories/encoder';\nimport { append_claim } from 'services/claim';\nimport { append_evidence } from 'services/evidence';\nimport { get_from_id } from 'services/id';\nimport { createLeaderLine } from 'services/line';\nimport { generate_match } from 'services/match';\nimport {\n  append_sibling_point,\n  append_point_child,\n  append_point_to_part,\n  set_rebut_to,\n  append_point_to_parent,\n  is_switch_for_append_id,\n} from 'services/point';\nimport { toastAndLog } from 'services/toast';\nimport { store } from 'stores/index';\nimport { point_slice } from 'stores/slices/point';\nimport { useCheckDepsUpdate, useDependentObj, usePreviousValue } from 'util/hooks';\n\nexport type typeSelected = ID_TYPE | undefined;\n\ntype idToPointRef = { [id: mPoint['id']]: React.RefObject<HTMLElement> };\n\nexport type AppContext = {\n  Callbacks: {\n    Point?: {\n      onClick: ((e: React.SyntheticEvent<HTMLElement>) => void) | undefined;\n    };\n  };\n  Refs: {\n    idToPointRef: { get: idToPointRef; add: (_: idToPointRef) => void };\n    nextFocus: { get: baseModel['id'] | undefined; set: (v: baseModel['id'] | undefined) => void };\n  };\n};\nexport const AppContext = createContext<AppContext | undefined>(undefined);\n\ntype rebutToFnInfo = [ReturnType<typeof set_rebut_to>, HTMLElement | null] | undefined;\nconst useOnClickToRebut = (\n  idToPointRef: idToPointRef,\n  rebutToFnInfo: rebutToFnInfo,\n  setRebutToFn: React.Dispatch<React.SetStateAction<rebutToFnInfo>>,\n  setLineStartId: React.Dispatch<React.SetStateAction<typeSelected>>,\n) => {\n  const stop = useCallback(() => {\n    setLineStartId(undefined);\n    setRebutToFn(undefined);\n  }, [setRebutToFn]);\n  const onClick = useCallback(\n    (e: React.SyntheticEvent<HTMLElement>) => {\n      if (rebutToFnInfo === undefined) return;\n      const [rebutToFn, previousActive] = rebutToFnInfo;\n      const data_modelid = e.currentTarget.getAttribute('data-modelid');\n      if (typeof data_modelid !== 'string' || !id_is_mPoint(data_modelid)) {\n        toastAndLog(\n          '反駁先の指定',\n          'Point, Claim, Evidenceを指定してください',\n          `invalid data_modelid: ${data_modelid}`,\n        );\n        return;\n      }\n      e.stopPropagation();\n      e.preventDefault();\n      if (e.target instanceof HTMLElement) e.target.blur();\n      rebutToFn(data_modelid);\n      stop();\n      if (previousActive !== null) previousActive.focus();\n    },\n    [idToPointRef, rebutToFnInfo, stop],\n  );\n  return { onClick, stop };\n};\n\nconst useAppEventListeners = (\n  selected: typeSelected,\n  setRebutToFn: React.Dispatch<React.SetStateAction<rebutToFnInfo>>,\n  setLineStartId: React.Dispatch<React.SetStateAction<typeSelected>>,\n  setNextFocus: (v: baseModel['id'] | undefined) => void,\n) => {\n  return {\n    add_claim: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog('Add Claim', 'Part, Point, Claim, Evidenceを選択してください', `invalid selected: ${selected}`);\n          return;\n        }\n        setNextFocus(append_claim(selected)?.id);\n      },\n      [selected],\n    ),\n    add_point: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog('Add Point', 'Part, Point, Claim, Evidenceを選択してください', `invalid selected: ${selected}`);\n          return;\n        }\n        setNextFocus(append_sibling_point(selected)?.id);\n      },\n      [selected],\n    ),\n    add_point_to_parent: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog(\n            'Add Point to Parent',\n            'Part, Point, Claim, Evidenceを選択してください',\n            `invalid selected: ${selected}`,\n          );\n          return;\n        }\n        setNextFocus(append_point_to_parent(selected)?.id);\n      },\n      [selected],\n    ),\n    add_point_child: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog(\n            'Add Point Child',\n            'Part, Point, Claim, Evidenceを選択してください',\n            `invalid selected: ${selected}`,\n          );\n          return;\n        }\n        setNextFocus(append_point_child(selected)?.id);\n      },\n      [selected],\n    ),\n    add_point_to_part: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog(\n            'Add Point to Part',\n            'Part, Point, Claim, Evidenceを選択してください',\n            `invalid selected: ${selected}`,\n          );\n          return;\n        }\n        setNextFocus(append_point_to_part(selected)?.id);\n      },\n      [selected],\n    ),\n    draw_line: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!id_is_PointChild(selected)) {\n          toastAndLog('反駁先の指定', 'Point, Claim, Evidenceを選択してください', `invalid selected: ${selected}`);\n          return;\n        }\n        setRebutToFn((_) => [set_rebut_to(selected), document.activeElement as HTMLElement | null]);\n        setLineStartId(selected);\n      },\n      [selected],\n    ),\n    add_evidence: useCallback(\n      (e?: Event | React.SyntheticEvent) => {\n        e?.preventDefault();\n        if (!is_switch_for_append_id(selected)) {\n          toastAndLog(\n            'Add Evidence',\n            'Part, Point, Claim, Evidenceを選択してください',\n            `invalid selected: ${selected}`,\n          );\n          return;\n        }\n        setNextFocus(append_evidence(selected)?.id);\n      },\n      [selected],\n    ),\n  };\n};\n\ntype typeHotkeys = { [keys: string]: ReturnType<typeof useHotkeys> };\n\nconst useAppHotkeys = (\n  selected: typeSelected,\n  setRebutToFn: React.Dispatch<React.SetStateAction<rebutToFnInfo>>,\n  escapeFn: (e?: Event | React.SyntheticEvent) => void,\n  setLineStartId: React.Dispatch<React.SetStateAction<typeSelected>>,\n  setNextFocus: (v: baseModel['id'] | undefined) => void,\n): typeHotkeys => {\n  const { add_claim, add_point, add_point_to_parent, add_point_child, add_point_to_part, draw_line, add_evidence } =\n    useAppEventListeners(selected, setRebutToFn, setLineStartId, setNextFocus);\n  return {\n    'alt+c': useHotkeys('alt+c', add_claim, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+e': useHotkeys('alt+e', add_evidence, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+p': useHotkeys('alt+p', add_point, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+shift+p': useHotkeys('alt+shift+p', add_point_to_parent, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+ctrl+shift+p': useHotkeys('alt+ctrl+shift+p', add_point_to_part, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+l': useHotkeys('alt+l', draw_line, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'alt+ctrl+p': useHotkeys('alt+ctrl+p', add_point_child, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n    'esc': useHotkeys('esc', escapeFn, { enableOnTags: ['INPUT', 'TEXTAREA'] }),\n  };\n};\n\ntype MovingDivLineProps = {\n  idToPointRef: idToPointRef;\n  lineStartId: typeSelected;\n  onMouseMoveFnRef: React.MutableRefObject<(e: React.MouseEvent) => void>;\n};\nconst MovingDivLine: React.FC<MovingDivLineProps> = (props) => {\n  const [pointerCoord, setPointerCoord] = useState<[number, number]>([0, 0]);\n  const [line, setLine] = useState<LeaderLine | undefined>(undefined);\n  const updateLine = useCallback(() => {\n    try {\n      line?.position();\n      line?.show();\n    } catch (e) {\n      if (!(e instanceof TypeError)) throw e; // lineがremove済みのときLeaderLineはTypeErrorを返すため、それだけ無視\n    }\n  }, [line]);\n  props.onMouseMoveFnRef.current = useCallback((e: React.MouseEvent) => setPointerCoord([e.clientX, e.clientY]), []);\n  return (\n    <MovingDivLineInner\n      coord={pointerCoord}\n      lineStartId={props.lineStartId}\n      idToPointRef={props.idToPointRef}\n      setLine={setLine}\n      updateLine={updateLine}\n    />\n  );\n};\nconst MovingDivLineInner: React.FC<{\n  coord: [number, number];\n  lineStartId: typeSelected;\n  idToPointRef: idToPointRef;\n  setLine: React.Dispatch<React.SetStateAction<LeaderLine | undefined>>;\n  updateLine: () => void;\n}> = (props) => {\n  const thisRef = useRef<HTMLDivElement>(null);\n  useEffect(() => {\n    let newLine: LeaderLine | undefined = undefined;\n    if (id_is_mPoint(props.lineStartId)) {\n      if (props.idToPointRef[props.lineStartId] !== undefined) {\n        const [start, end] = [props.idToPointRef[props.lineStartId].current, thisRef.current];\n        if (start !== null && end !== null) newLine = createLeaderLine(start, end);\n      }\n    }\n    props.setLine(newLine);\n    return () => newLine?.remove();\n  }, [props.lineStartId]);\n  useEffect(() => props.updateLine(), [props.coord, props.lineStartId, props.updateLine]);\n  return (\n    <div\n      ref={thisRef}\n      css={css`\n        & {\n          width: 1px;\n          height: 1px;\n          pointer-events: none;\n          visibility: none;\n          position: fixed;\n        }\n      `}\n      style={{ left: `${props.coord[0]}px`, top: `${props.coord[1]}px` }}\n    ></div>\n  );\n};\n\nconst toggleFullscreen = () => {\n  if (!document.fullscreenEnabled) {\n    toastAndLog('全画面表示失敗', 'このブラウザでは使用できません');\n    return;\n  }\n  if (!document.fullscreenElement) {\n    document.documentElement\n      .requestFullscreen()\n      .catch((e) => toastAndLog('全画面表示失敗', 'エラーが発生しました', `${e.message} (${e.name})`));\n  } else {\n    document.exitFullscreen();\n  }\n};\n\nfunction App() {\n  const [matchID, setMatchID] = useState<mMatch['id'] | undefined>(undefined);\n  // 初めに1回だけ実行\n  useLayoutEffect(() => {\n    setMatchID(\n      generate_match({\n        aff: ['AC', 'NQ', '1NR', '1AR', '2NR', '2AR'],\n        neg: ['NC', 'AQ', '1AR', '2NR', '2AR'],\n      }).id,\n    ); // TODO: sideの構成をハードコーディングしているため、設定用Repositoryなどに切り出す\n  }, []);\n  const [selected, setSelected] = useState<typeSelected>(undefined);\n  const [rebutToFn, setRebutToFn] = useState<rebutToFnInfo>(undefined);\n  const [idToPointRef, setIdToPointRef] = useState<idToPointRef>({});\n  const [nextFocus, setNextFocus] = useState<baseModel['id'] | undefined>(undefined);\n  const [lineStartId, setLineStartId] = useState<typeSelected>(undefined);\n  const { onClick: onClickToRebut, stop: stopToRebut } = useOnClickToRebut(\n    idToPointRef,\n    rebutToFn,\n    setRebutToFn,\n    setLineStartId,\n  );\n  const operations = useAppEventListeners(selected, setRebutToFn, setLineStartId, setNextFocus);\n  const [loadFileName, setLoadFileName] = useState<string | undefined>(undefined);\n  const [LoadFileModal, openLoadFileModal, closeLoadFileModal, isOpenLoadFileModal] = useLoadFileModal(\n    setMatchID,\n    setLoadFileName,\n  );\n  const [HelpModal, openHelpModal, closeHelpModal, isOpenHelpModal] = useHelpModal();\n  const [TutorialModal, openTutorialModal, closeTutorialModal, isOpenTutorialModal] = useTutorialModal();\n  useAppHotkeys(selected, setRebutToFn, stopToRebut, setLineStartId, setNextFocus);\n  const onMouseMoveFnRef = useRef((e: React.MouseEvent) => {});\n  const AppContextValue = useDependentObj(\n    {\n      Callbacks: {\n        Point: {\n          onClick: onClickToRebut,\n        },\n      },\n      Refs: {\n        idToPointRef: {\n          get: idToPointRef,\n          add: (_new: idToPointRef) => setIdToPointRef((state) => ({ ...state, ..._new })),\n        },\n        nextFocus: {\n          get: nextFocus,\n          set: setNextFocus,\n        },\n      },\n    },\n    [onClickToRebut, idToPointRef, setIdToPointRef, nextFocus, setNextFocus],\n  );\n  const [ToolBar, isToolBarOpen, toggleToolBarOpen] = useToolBar();\n  const menuBarItems = [\n    {\n      label: 'ファイル',\n      items: [\n        { label: 'ファイルを開く', onClick: openLoadFileModal },\n        { label: 'ファイルを保存', onClick: () => matchID && saveMatch(matchID, loadFileName) },\n        { label: '設定', onClick: () => alert('未実装です') },\n      ],\n    },\n    {\n      label: '編集',\n      items: [\n        { label: '論点を追加', onClick: operations.add_point },\n        { label: 'クレームを追加', onClick: operations.add_claim },\n        { label: '証拠資料を追加', onClick: operations.add_evidence },\n        { label: 'パートに論点を追加', onClick: operations.add_point_to_part },\n        { label: '論点を削除', onClick: () => alert('未実装です') },\n        { label: 'パートを編集', onClick: () => alert('未実装です') },\n      ],\n    },\n    {\n      label: '表示',\n      items: [\n        { label: '全画面表示', onClick: toggleFullscreen },\n        { label: `操作ボタンの${isToolBarOpen ? '非表示' : '表示'}`, onClick: toggleToolBarOpen },\n      ],\n    },\n    {\n      label: 'ヘルプ',\n      items: [\n        { label: '操作説明動画', onClick: openTutorialModal },\n        { label: 'ショートカットキー一覧', onClick: openHelpModal }, // TODO: 他ヘルプを加えたら改名\n        {\n          label: '質問・バグ報告・機能要望を送信',\n          onClick: () => {\n            alert('コメントはGitHub Discussionsで受け付けます。リンク先から適切なカテゴリを選んで投稿してください');\n            window.open('https://github.com/stringthread/flowsheet/discussions/new/choose', '_blank');\n          },\n        },\n        { label: '投げ銭', onClick: () => alert('未実装です') },\n      ],\n    },\n  ];\n  return (\n    <ErrorBoundary>\n      <Provider store={store}>\n        <AppContext.Provider value={AppContextValue}>\n          <div onMouseMove={onMouseMoveFnRef.current} className='App'>\n            <MenuBar items={menuBarItems} />\n            <ToolBar operations={operations} />\n            <MovingDivLine idToPointRef={idToPointRef} lineStartId={lineStartId} onMouseMoveFnRef={onMouseMoveFnRef} />\n            {matchID ? <Match matchID={matchID} setSelected={setSelected} /> : null}\n            <LoadFileModal />\n            <HelpModal />\n            <TutorialModal />\n          </div>\n          <ToastContainer\n            position='top-center'\n            style={{\n              color: 'red',\n            }}\n          />\n        </AppContext.Provider>\n      </Provider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n","import { Global } from '@emotion/react';\nimport App from 'components/App';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { sanitize_css } from 'sanitize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Global styles={sanitize_css} />\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}